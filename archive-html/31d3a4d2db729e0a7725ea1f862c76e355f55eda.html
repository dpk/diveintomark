<!DOCTYPE HTML>
<html lang=en>
<head>
<meta charset=utf-8>
<title>What I do for a living [dive into mark]</title>
<link rel=alternate type=application/atom+xml href=/web/20110222011314/http://diveintomark.org/feed/>
<link rel=me type=text/html href=/web/20110222011314/http://www.google.com/profiles/pilgrim>
<link rel=search type=application/opensearchdescription+xml href=/web/20110222011314/http://wearehugh.com/public/2006/09/opensearch-full.xml title="dive into mark">
<link rel="shortcut icon" href=/web/20110222011314im_/http://diveintomark.org/favicon.ico>
<link rel=prev href="/web/20110222011314/http://diveintomark.org/archives/2001/11/12/still_longing" title="still longing">
<link rel=next href="/web/20110222011314/http://diveintomark.org/archives/2001/11/14/try_harder" title="try harder">
<link rel=up href="/web/20110222011314/http://diveintomark.org/archives#p135" title="November 2001">
<link rel='index' title='dive into mark' href='/web/20110222011314/http://diveintomark.org/' />
<link rel='prev' title='still longing' href='/web/20110222011314/http://diveintomark.org/archives/2001/11/12/still_longing' />
<link rel='next' title='try harder' href='/web/20110222011314/http://diveintomark.org/archives/2001/11/14/try_harder' />
<link rel='canonical' href='/web/20110222011314/http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living' />
<link rel='shortlink' href='/web/20110222011314/http://diveintomark.org/?p=135' />
<meta name="keywords" content="drm,microsoft,python,regex,zen">
<link href='/web/20110222011314cs_/http://fonts.googleapis.com/css?family=Lato:regular,regularitalic,bold,bolditalic' rel='stylesheet' type='text/css'>
<style type=text/css>
/*dive into minimalism(c)2010 Mark Pilgrim,MIT-licensed including graphics*/
html{background:white url(/web/20110222011314/http://wearehugh.com/m.jpg) no-repeat bottom right;color:black}
body{font:normal medium Lato,serif;margin:1.75em auto;width:40em;line-height:1.75;word-spacing:0.1em}
em,i,blockquote{font-family:Lato,serif;font-style:oblique}
strong,b{font-family:Lato,serif;}
pre,code,var,samp,kbd,tt{font-family:monospace}
h2,h3{font-weight:bold}
.c{font-family:'Arial Unicode MS',FreeSerif,'DejaVu Sans',sans-serif}
a{background:transparent;text-decoration:none;border-bottom:1px dotted}
a:hover{border-bottom:1px solid}
a:link{color:#1b67c9}
a:visited{color:darkorchid}
h1 a,h2 a,h3 a,#nav a,.punch a{color:inherit !important}
abbr,.p{border:0;letter-spacing:0.1em;text-transform:lowercase;font-variant:small-caps}
h1,h2,h3,p,ul,ol,#nav{margin:1.75em 0}
h1,h2,h3{font-size:medium}
h1,h2{display:inline}
h1{font-weight:normal}
pre,tt{white-space:pre-wrap;font-size:medium;line-height:2.154}
cite{font-style:normal}
img{border:0}
.framed{border:1px solid}
.cl,#arc th,#arc td,.punch p{list-style:none;margin:0;padding:0}
.cl li{margin-bottom:-1px;border-bottom:1px dotted;overflow:hidden}
.sig,.tb,.pb,blockquote{font-size:small;line-height:2.154;margin:2.154em 0;padding:0}
blockquote{font-style:oblique;border-left:1px dotted;margin-left:2.154em;padding-left:2.154em}
blockquote p{margin:2.154em 0}
.tb,.pb{margin-top:0;padding:2.154em 0}
.sig,.punch,#arc th{text-align:right}
.f,.c{text-align:center;clear:both}
#comment,#arc{width:100%}
#comment{height:14.6em;margin:0;line-height:2.154}
.me{background:papayawhip;color:black;padding:1.75em 1.75em 0 1.75em;border-top:1px dotted;margin-top:-2px}
.me>p:first-child{margin-top:0}
.punch{float:right;font-size:x-small;margin:0 0 1.75em 1.75em;line-height:1.75}
#nav + .punch + p:first-letter{float:left;color:gainsboro;padding:0.11em 4px 0 0;font:normal 4em/0.68 serif}
#arc th{padding:0 1.75em 0 0;vertical-align:baseline}
#arc{border-collapse:collapse}
figure{display:block;text-align:center;margin:1.75em 0}
figure img{display:block;margin:0 auto}
</style>
<script>_gaq=[['_setAccount','UA-7434570-2'],['_trackPageview']];(function(){var g=document.createElement('script');g.src='//www.google-analytics.com/ga.js';g.setAttribute('async','true');document.documentElement.firstChild.appendChild(g);})();</script>
<link rel=canonical href="/web/20110222011314/http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living">
</head>
<body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/diveintomark.org\/archives\/2001\/11\/13\/what_i_do_for_a_living";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "22";
var displayMonth = "Feb";
var displayYear = "2011";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20110222011314" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20101215065922/http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="15 Dec 2010"><strong>DEC</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 1:13:14 Feb 22, 2011">FEB</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Mar
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20101215065922/http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living" title="6:59:22 Dec 15, 2010" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 1:13:14 Feb 22, 2011">22</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20080524203630/http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="24 May 2008"><strong>2008</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 1:13:14 Feb 22, 2011">2011</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2012
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20110222011314*/http://diveintomark.org/archives/2001/11/13/what_i_do_for_a_living" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>13 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">21 Jun 06 - 22 Feb 11</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000001001001_2007:-1:010100000000_2008:-1:001020000000_2009:-1:000000000000_2010:-1:000001000111_2011:1:010000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div id=nav><h1><a accesskey=1 href=/web/20110222011314/http://diveintomark.org/>dive into mark</a></h1> &#8227;
<a href="/web/20110222011314/http://diveintomark.org/archives#p135">November 13, 2001</a> &#8227;
<h2>What I do for a living</h2> (<a href="/web/20110222011314/http://diveintomark.org/tag/drm" rel="tag">drm</a>, <a href="/web/20110222011314/http://diveintomark.org/tag/microsoft" rel="tag">microsoft</a>, <a href="/web/20110222011314/http://diveintomark.org/tag/python" rel="tag">python</a>, <a href="/web/20110222011314/http://diveintomark.org/tag/regex" rel="tag">regex</a>, <a href="/web/20110222011314/http://diveintomark.org/tag/zen" rel="tag">zen</a>)</div>
<p>I sing &#8220;Happy Birthday&#8221; to my car every 1000 miles.  This morning was 8000.  I also have nicknames for my cars.  This one is the Blue Baron.  Years ago, my first car, which I actually inherited from my father when I went to college and he upgraded, was a red Nissan Sentra.  He and I had nicknamed it the Red Baron, after the character in Snoopy&#8217;s fantasies.  After college I sold it and got a biege Mazda, which I immediately nicknamed the Biege Baron, because it was alliterative and because &#8220;biege&#8221; is one of those funny colors.  Then came the Green Baron, and now, finally, the Blue Baron.  All of which leads me to the Zen story for today, courtesy of <a href="/web/20110222011314/http://www.rider.edu/users/suler/zenstory/ritualcat.html">Zen Stories To Tell Your Neighbors</a>:</p>
<blockquote cite="http://www.rider.edu/users/suler/zenstory/ritualcat.html"><p>When the spiritual teacher and his disciples began their
   evening meditation, the cat who lived in the monastery made such noise
   that it distracted them. So the teacher ordered that the cat be tied
   up during the evening practice.</p><p>Years later, when the teacher died,
   the cat continued to be tied up during the meditation session. And
   when the cat eventually died, another cat was brought to the monastery
   and tied up.</p><p>Centuries later, learned descendants of the spiritual
   teacher wrote scholarly treatises about the religious significance of
   tying up a cat for meditation practice.</p></blockquote>

<p><cite>The Register</cite>: <a href="/web/20110222011314/http://www.theregister.co.uk/content/4/22791.html">Huge Windows XP sales save the world</a>.  Well-done article about how Microsoft&#8217;s lies, damn lies, and statistics about how well Windows XP is &#8220;selling&#8221;.  In this context, &#8220;selling&#8221; almost certainly including retailers who are essentially forced by Microsoft to pre-order a certain large number of copies.  This is similar to how the record companies work, pre-pushing large quantities of inventory of the latest &#8220;hot&#8221; album onto retailers and then turning around and claiming that the latest album is indeed &#8220;hot&#8221; because it sold X million copies in the first week.  Of course, most of those copies are still sitting on shelves, waiting for us to come buy them because we think everyone else is.  (There are obviously other factors as well; the general public is gullible, but not infinitely gullible.)  Plus, they do this all the time, so if one album doesn&#8217;t work out, there&#8217;s always the next one, and the failed one will probably get lost in the noise.  Microsoft only does this once every couple of years, so the stakes are much higher.  Plus they probably can&#8217;t generate much word-of-mouth buzz.  It&#8217;s only an operating system, it&#8217;s not really going to save the world.</p>

<p><cite>CNET</cite>: <a href="/web/20110222011314/http://news.cnet.com/news/0-1005-200-7852921.html">Sites spotlight reports of copy-protected CDs</a>. [via <a href="/web/20110222011314/http://dlis.gseis.ucla.edu/people/pagre/rre.html">RRE</a>]  Or, if you prefer, &#8220;corrupt CDs&#8221;.  Good to see this story break out of Slashdot and get some broader attention.</p>

<p><cite>CNET</cite>: <a href="/web/20110222011314/http://news.cnet.com/news/0-1003-200-7851166.html">Thai Software Pirates Crack Windows XP</a>. [via <a href="/web/20110222011314/http://dlis.gseis.ucla.edu/people/pagre/rre.html">RRE</a>]  This is essentially the same story that The Register carried yesterday, without any sort of attribution.  I wonder if The Register cares about stuff like that.  For all I know, they sold the story to them, or licensed it to them, or something.  How does stuff like that work?  I guess this is probably how most people feel about copy-protected CDs, or software licensing agreements, or the DMCA.  It doesn&#8217;t affect them directly, so they don&#8217;t care, and by the time it does affect them, it&#8217;s too late to do anything about it.  (Meanwhile, I find that I care less and less about Windows XP, now that I&#8217;ve upgraded to Linux.)</p>

<p>Careful what you <a href="/web/20110222011314/http://diveintomark.org/archives/2001/11/09.html">wish for</a>.  I am now <a href="mailto:mark@nudesleeper.com">mark@nudesleeper.com</a>.  Thanks to <a href="/web/20110222011314/http://www.drunkandretired.com/log.html">Michael Cot&eacute;</a> for setting it up.</p>

<p><cite>Slashdot</cite>: <a href="/web/20110222011314/http://slashdot.org/comments.pl?sid=23528&cid=0&pid=0&startat=&threshold=3&mode=flat&commentsort=0&op=Change">Business @ the Speed of Stupid</a>.</p>

<p>A while back I reported that Google was blocking Lynx from searching, giving a 403 Forbidden message.  In fact, this is incorrect, or at least misleading.  I stumbled across the same scenario again last night and found that their error message has been expanded:</p>
<blockquote><p>Your client from the IP address ###.###.###.### does not have premission to get URL /search?q=XXXX from this server.</p>
<p>Please see Google&#8217;s Terms of Service posted at <a href="/web/20110222011314/http://www.google.com/terms_of_service.html">http://www.google.com/terms_of_service.html</a></p>
<p>If you believe that you have received this response in error, please
   send email to <a href="mailto:forbidden@google.com">forbidden@google.com</a>. In your email, please let us know
   the IP address from which you are querying (it is shown above). This
   will help us track down the problem.</p>
</blockquote>
<p>So the problem is not that I was using Lynx, but that I was on my shell account on Sourceforge.  I verified this by running Lynx directly from my laptop and searching Google, and it works just fine.  So the new mystery is why Google blocks access to searching from Sourceforge.  But I don&#8217;t care as much about solving this mystery; I was only connecting from Sourceforge because I lost track of which window I was in (or, more specifically, which virtual desktop I was on).</p>

<p>This morning I&#8217;ve been trying to parse US phone numbers, which the client insists on entering free-form.  I need to parse them into area code, trunk, number, and optional extension.  <a href="/web/20110222011314/http://www.google.com/search?q=regular+expression+phone+number">Searching Google</a> finds all kinds of examples, all of which, for one reason or another, suck.</p>

<ul>
<li><a href="/web/20110222011314/http://www.thunderstone.com/doc/rex.html">[1-9][01][0-9]-?[0-9]3-=[0-9]4</a>  Fails on newer area codes (where middle digit is not 0 or 1).</li>
<li><a href="/web/20110222011314/http://regxlib.com/REDetails.aspx?regexp_id=27">(((\d3) ?)|(d{3}-))?d{3}-d{4}</a>  Fails on &#8220;800.555.1212&#8243;.</li>
<li><a href="/web/20110222011314/http://www.vbxml.com/people/bosley/VBRegex.asp">^(?([1-9]d{2}))?s?([1-9]d{2})[-s]?(d{4})$</a> Better, and can handle things like &#8220;(800) 555-1212&#8243;, but can&#8217;t handle extensions, a leading &#8220;1&#8243;, or periods instead of dashes between the groups.</li>
</ul>

<p>It is important to note that my purpose is parsing, not validation, so I want my expression to be as liberal as possible without making parsing mistakes.  It&#8217;s in the end user&#8217;s best interests to enter their real phone number.  This is not for some annoying survey or registration page; it&#8217;s an integral part of their business.  But we all know that users can&#8217;t follow directions, so simply posting a note next to the field saying &#8220;be sure to enter ###-###-####&#8221; won&#8217;t be good enough.</p>

<p>After much wrangling, I finally settled on this:</p>
<blockquote>
<pre>import re
class InvalidPhoneNumber(Exception): pass
phonePattern = re.compile(r"""
    ^            # match beginning of string
    \D*          # swallow anything that isn't numeric
    1?           # swallow leading 1, if present
    \D*          # swallow anything that isn't numeric
    (\d{3})      # capture 3-digit area code
    \D*          # swallow anything that isn't numeric
    (\d{3})      # capture 3-digit trunk
    \D*          # swallow anything that isn't numeric
    (\d{4})      # capture 4-digit number
    \D*          # swallow anything that isn't numeric
    (\d*)        # capture extension, if present
    """, re.VERBOSE)
def parsePhone(phone):
    match = phonePattern.search(phone)
    if match:
        return match.groups()
    else:
        raise InvalidPhoneNumber, phone
</pre>
</blockquote>

<p>This will correctly parse any of the following and return a tuple of four elements, in these cases either (&#8217;800&#8242;, &#8217;555&#8242;, &#8217;1212&#8242;, &#8221;) or (&#8217;800&#8242;, &#8217;555&#8242;, &#8217;1212&#8242;, &#8217;1234&#8242;):</p>
<ul>
<li>800-555-1212</li>
<li>800 555 1212</li>
<li>800.555.1212</li>
<li>(800) 555-1212</li>
<li>1-800-555-1212</li>
<li>800-555-1212-1234</li>
<li>800-555-1212&#215;1234</li>
<li>800-555-1212 ext. 1234</li>
<li>work 1-(800) 555.1212 #1234</li>
</ul>

<p>The client seems pleased by the liberalness of the formats, and I used the whole thing as the basis of an impromptu lesson on regular expressions for the in-house developers (none of whom had ever seen them).  And all before lunch.</p>

<p>I love coding, and teaching, and writing.  I should do it for a living.  Hey, wait, <a href="/web/20110222011314/http://diveintomark.org/about/resume/">I do do it for a living</a>.  That&#8217;s so cool.</p>
<p class=c>&#167;

<h3 id=respond>Respond privately</h3>
<p><i>I am no longer accepting public comments on this post, but you can use this form to contact me privately.  (Your message will not be published.)</i></p>
<form action="/web/20110222011314/http://wearehugh.com/public/contact.cgi" method=POST id=commentform>
<p><label for=author>Name </label><br>
<input type=text name=author id=author>
<p><label for=email>Email</label><br>
<input type=text name=email id=email></p>
<p><label for=comment>Message</label>
<textarea name=comment id=comment rows=10 cols=40></textarea></p>
<p><input type=submit value="Send message">
</p>
</form>
<p class=c>&#167;
<div class=f>
<p>
<a title="my comments here and elsewhere" href=/web/20110222011314/http://firehose.diveintomark.org/>firehose</a> &#x2027;
<a title="my current open source projects" href="/web/20110222011314/http://code.google.com/u/@UxdWQ1xUDhhBWwd%2F/">code</a> &#x2027;
<a title="my personal news aggregator" href=/web/20110222011314/http://feeds.diveintomark.org/>planet</a>
<p>&#169; 2001&#8211;present <a accesskey=9 href=/web/20110222011314/http://diveintomark.org/about>Mark Pilgrim</a>
</div>
</body>
</html>

<!-- Dynamic page generated in 0.284 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-02-17 18:08:11 -->
<!-- super cache -->




<!--
     FILE ARCHIVED ON 1:13:14 Feb 22, 2011 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:37:15 Jan 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
