<!DOCTYPE HTML>
<html lang=en>
<head>
<meta charset=utf-8>
<title>A dead fish in yesterday&#8217;s newspaper [dive into mark]</title>
<link rel=alternate type=application/atom+xml href=/web/20110806093300/http://diveintomark.org/feed/>
<link rel=me type=text/html href=/web/20110806093300/http://www.google.com/profiles/pilgrim>
<link rel=author href=/web/20110806093300/http://diveintomark.org/about>
<link rel=search type=application/opensearchdescription+xml href=/web/20110806093300/http://wearehugh.com/public/2006/09/opensearch-full.xml title="dive into mark">
<link rel="shortcut icon" href=/web/20110806093300im_/http://diveintomark.org/favicon.ico>
<link rel=prev href="/web/20110806093300/http://diveintomark.org/archives/2008/03/14/tubutt" title="Holy fucking shit, look at all those tubas">
<link rel=next href="/web/20110806093300/http://diveintomark.org/archives/2008/03/18/translation-from-ms-speak-to-english-of-selected-portions-of-joel-spolskys-martin-headsets" title="Translation From MS-Speak to English of Selected Portions of Joel Spolsky&#8217;s &#8220;Martian Headsets&#8221;">
<link rel=up href="/web/20110806093300/http://diveintomark.org/archives#p1764" title="March 2008">
<link rel="alternate" type="application/rss+xml" title="dive into mark &raquo; A dead fish in yesterday&#8217;s newspaper Comments Feed" href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish/feed" />
<link rel='index' title='dive into mark' href='/web/20110806093300/http://diveintomark.org/' />
<link rel='prev' title='Holy fucking shit, look at all those tubas' href='/web/20110806093300/http://diveintomark.org/archives/2008/03/14/tubutt' />
<link rel='next' title='Translation From MS-Speak to English of Selected Portions of Joel Spolsky&#8217;s &#8220;Martian Headsets&#8221;' href='/web/20110806093300/http://diveintomark.org/archives/2008/03/18/translation-from-ms-speak-to-english-of-selected-portions-of-joel-spolskys-martin-headsets' />
<link rel='canonical' href='/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish' />
<link rel='shortlink' href='/web/20110806093300/http://diveintomark.org/?p=1764' />
<meta name="description" content="If you've been thinking Gee, I just can't get enough of that Pilgrim guy, I wish there a way I could stalk him without being overly creepy about it, then this firehose is for you.">
<meta name="keywords" content="blogging,draconian,markup,mu,venus,xml">
<link href="/web/20110806093300cs_/http://fonts.googleapis.com/css?family=Lora" rel=stylesheet>
<style type=text/css>
/*dive into minimalism(c)2010 Mark Pilgrim,MIT-licensed including graphics*/
html{background:white url(/web/20110806093300/http://wearehugh.com/m.jpg) no-repeat bottom right;color:black}
body{font:normal medium Lora,serif;margin:1.75em auto;width:40em;line-height:1.75;word-spacing:0.1em}
em,i,blockquote{font-family:Lora,serif;font-style:oblique}
strong,b{font-family:Lora,serif;}
pre,code,var,samp,kbd,tt{font-family:monospace}
h2,h3{font-weight:bold}
.c{font-family:'Arial Unicode MS',FreeSerif,'DejaVu Sans',sans-serif}
a{background:transparent;text-decoration:none;border-bottom:1px dotted}
a:hover{border-bottom:1px solid}
a:link{color:#1b67c9}
a:visited{color:darkorchid}
h1 a,h2 a,h3 a,#nav a,.punch a{color:inherit !important}
abbr,.p{border:0;letter-spacing:0.1em;text-transform:lowercase;font-variant:small-caps}
h1,h2,h3,p,ul,ol,#nav{margin:1.75em 0}
h1,h2,h3{font-size:medium}
h1,h2{display:inline}
h1{font-weight:normal}
pre,tt{white-space:pre-wrap;font-size:medium;line-height:2.154}
cite{font-style:normal}
img{border:0}
.framed{border:1px solid}
.cl,#arc th,#arc td,.punch p{list-style:none;margin:0;padding:0}
.cl li{margin-bottom:-1px;border-bottom:1px dotted;overflow:hidden}
.sig,.tb,.pb,blockquote{font-size:small;line-height:2.154;margin:2.154em 0;padding:0}
blockquote{font-style:oblique;border-left:1px dotted;margin-left:2.154em;padding-left:2.154em}
blockquote p{margin:2.154em 0}
.tb,.pb{margin-top:0;padding:2.154em 0}
.sig,.punch,#arc th{text-align:right}
.f,.c{text-align:center;clear:both}
#comment,#arc{width:100%}
#comment{height:14.6em;margin:0;line-height:2.154}
.me{background:papayawhip;color:black;padding:1.75em 1.75em 0 1.75em;border-top:1px dotted;margin-top:-2px}
.me>p:first-child{margin-top:0}
.punch{float:right;font-size:x-small;margin:0 0 1.75em 1.75em;line-height:1.75}
#nav + .punch + p:first-letter{float:left;color:gainsboro;padding:0.11em 4px 0 0;font:normal 4em/0.68 serif}
#arc th{padding:0 1.75em 0 0;vertical-align:baseline}
#arc{border-collapse:collapse}
figure{display:block;text-align:center;margin:1.75em 0}
figure img{display:block;margin:0 auto}
</style>
<script>_gaq=[['_setAccount','UA-7434570-2'],['_trackPageview'],['_trackPageLoadTime']];(function(){var g=document.createElement('script');g.src='//www.google-analytics.com/ga.js';g.setAttribute('async','true');document.documentElement.firstChild.appendChild(g);})();</script>
<link rel=canonical href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish">
</head>
<body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/diveintomark.org\/archives\/2008\/03\/15\/dead-fish";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "6";
var displayMonth = "Aug";
var displayYear = "2011";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://diveintomark.org/archives/2008/03/15/dead-fish" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20110806093300" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20110514122545/http://diveintomark.org/archives/2008/03/15/dead-fish" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="14 May 2011"><strong>MAY</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 9:33:00 Aug 6, 2011">AUG</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Sep
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20110514122545/http://diveintomark.org/archives/2008/03/15/dead-fish" title="12:25:45 May 14, 2011" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 9:33:00 Aug 6, 2011">6</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20100615100544/http://diveintomark.org/archives/2008/03/15/dead-fish" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="15 Jun 2010"><strong>2010</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 9:33:00 Aug 6, 2011">2011</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2012
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20110806093300*/http://diveintomark.org/archives/2008/03/15/dead-fish" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>12 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">18 Mar 08 - 6 Aug 11</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:-1:002121000000_2009:-1:000000000000_2010:-1:000001000111_2011:7:000010010000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div id=nav><h1><a accesskey=1 href=/web/20110806093300/http://diveintomark.org/>dive into mark</a></h1> &#8227;
<a href="/web/20110806093300/http://diveintomark.org/archives#p1764">March 15, 2008</a> &#8227;
<h2>A dead fish in yesterday&#8217;s newspaper</h2> (<a href="/web/20110806093300/http://diveintomark.org/tag/blogging" rel="tag">blogging</a>, <a href="/web/20110806093300/http://diveintomark.org/tag/draconian" rel="tag">draconian</a>, <a href="/web/20110806093300/http://diveintomark.org/tag/markup" rel="tag">markup</a>, <a href="/web/20110806093300/http://diveintomark.org/tag/mu" rel="tag">mu</a>, <a href="/web/20110806093300/http://diveintomark.org/tag/venus" rel="tag">venus</a>, <a href="/web/20110806093300/http://diveintomark.org/tag/xml" rel="tag">xml</a>)</div>
<p>Time to resurface a few good comments I made at <a href="/web/20110806093300/http://www.tbray.org/ongoing/When/200x/2007/01/30/XML-2">Tim&#8217;s place</a> last year:</p>

<blockquote cite="http://www.tbray.org/ongoing/When/200x/2007/01/30/XML-2#c1170212309.667789">
<p>> if an electronic-trading system receives an XML message for a transaction valued at â‚¬2,000,000, and there&#8217;s a problem with a missing end tag, you do not want the system guessing what the message meant</p>

<p>You [Tim] have used this example, or variations of it, since 1997. I think I can finally express why it irritates me so much: you are conflating &#8220;non-draconian error handling&#8221; with &#8220;non-deterministic error handling&#8221;. It is true that there are some non-draconian formats which do not define an error handling mechanism, and it is true that this leads to non-interoperable implementations, but it is not true that non-draconian error handling implies &#8220;the system has to guess.&#8221; It is possible to specify a deterministic algorithm for graceful (non-draconian) error handling; this is one of the primary things WHATWG is attempting to do for HTML 5.</p>

<p>If any format (including an as-yet-unspecified format named &#8220;XML 2.0&#8243;) allows the creation of a document that two clients can parse into incompatible representations, and both clients have an equal footing for claiming that their way is correct, then that format has a serious bug. Draconian error handling is one way to solve such a bug, but it is not the only way, and for 10 years you&#8217;ve been using an overly simplistic example that misleadingly claims otherwise.</p>
</blockquote>

<p>And, in the same thread but on a different note:</p>

<blockquote cite="http://www.tbray.org/ongoing/When/200x/2007/01/30/XML-2#c1170450166.467048">
<p>I would posit that, for the vast majority of feed producers, feedvalidator.org *is* RSS (and Atom). People only read the relevant specs when they want to argue that the validator has a false positive (which has happened, and results in a new test) or a false negative (which has also happened, and also results in a new test). Around the time that RFC 4287 was published, Sam <a href="/web/20110806093300/http://feedvalidator.org/testcases/atom/">rearranged the tests by spec section</a>. This is why specs matter. The validator service <a href="/web/20110806093300/http://diveintomark.org/archives/2004/08/16/specs">lets morons be efficient morons</a>, and the tests behind it let the assholes be efficient assholes. More on this in a minute.</p>

<p>> A simpler specification would require a smaller and finite amount of test cases.</p>

<p>The only thing with a &#8220;finite amount of test cases&#8221; is a dead fish wrapped in yesterday&#8217;s newspaper.</p>

<p>On October 2, 2002, the service that is now hosted at feedvalidator.org came bundled with 262 tests. Today it has 1707. That ain&#8217;t all Atom. To a large extent, the increase in tests parallels an increase in understanding of feed formats and feed delivery mechanisms. The world understands more about feeds in 2007 than it did in 2002, and much of that knowledge is embodied in the validator service.</p>

<p>If a group of people want to define an XML-ish format with robust, deterministic error handling, then they will charge ahead and do so. Some in that group will charge ahead to write tests and a validator, which (one would hope) will be available when the spec finally ships. And then they will spend the next 5-10 years refining the validator, and its tests, based on the world&#8217;s collective understanding. It will take this long to refine the tests into something bordering on comprehensive *regardless of how simple the spec is* in the first place.</p>

<p>In short, you&#8217;re asking the wrong question: &#8220;How can we reduce the number of tests that would we need to ship with the spec in order to feel like we had complete coverage?&#8221; That&#8217;s a pernicious form of premature optimization. The tests you will actually need (and, hopefully, will actually *have*, 5 years from now) bears no relationship to the tests you can dream up now. True &#8220;simplicity&#8221; emerges over time, as the world&#8217;s understanding grows and the format proves that it won&#8217;t drown you in &#8220;gotchas&#8221; and unexpected interactions. XML is over 10 years old now. How many XML parsers still don&#8217;t support RFC 3023? How many do support it if you only count the parts where XML is served as &#8220;application/xml&#8221;?</p>

<p>I was *really proud* of those 262 validator tests in 2002. But if you&#8217;d forked the validator on October 3rd, 2002, and never synced it, you&#8217;d have something less than worthless today. Did the tests rot? No; the world just got smarter.</p>
</blockquote>

<p>On a somewhat related note, I&#8217;ve cobbled together a <a href="/web/20110806093300/http://firehose.diveintomark.org/">firehose</a> which tracks comments (like these) that I make on other selected sites.  Many thanks to <a href="/web/20110806093300/http://www.intertwingly.net/blog/">Sam</a> for teaching me about <a href="/web/20110806093300/http://www.intertwingly.net/code/venus/docs/filters.html">Venus filters</a>, which make it all possible.  If you&#8217;ve been thinking &#8220;Gee, I just can&#8217;t get enough of that Pilgrim guy, I wish there were a way that I could stalk him without being overly creepy about it,&#8221; then this firehose is for you.</p>
<p class=c>&#167;

<h3 id=comments>Twenty two comments here (<a href=/web/20110806093300/http://diveintomark.org/recentcomments>latest comments</a>)</h3>
<ol class=cl>
<li id="comment-11489"><p>Open sourced code for that firehose coming soon?  It&#8217;s quite awesome.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://www.tompreuss.com/' rel='external nofollow' class='url'>Tom</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11489" title="March 15, 2008 @ 3:19 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11490"><p><a href="/web/20110806093300/http://firehose.diveintomark.org/filters/" rel="nofollow">http://firehose.diveintomark.org/filters/</a></p>
<p>Here&#8217;s how it works:</p>
<p>Like <a href="/web/20110806093300/http://feeds.diveintomark.org/" rel="nofollow">http://feeds.diveintomark.org/</a> , it aggregates feeds.  Some sites (like Reddit) provide per-user feeds, so that should be easy.  However, I generally write a filter for these anyway so I can munge titles or other elements for consistency.  In the case of Reddit, the content of each entry doesn&#8217;t have Markdown applied (it&#8217;s just whatever you typed in, despite the fact that Reddit applies Markdown to every comment).  So I wrote a filter that applies Markdown to each entry&#8217;s content before outputting it.</p>
<p>Other sites (like my blog) only have one &#8220;recent comments&#8221; feed that has comments from all users.  So instead of showing you the whole comment feed, the firehose filters them to only output stuff I wrote.  Filters are written in Python and act on a normalized Atom entry, which I load into libxml2 and query with XPath.  And, if necessary, munge with libxml2 functions as well.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11490" title="March 15, 2008 @ 4:28 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11491"><p>Oh, and <a href="/web/20110806093300/http://firehose.diveintomark.org/config.ini" rel="nofollow">http://firehose.diveintomark.org/config.ini</a> shows how you associate a filter with a specific feed.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11491" title="March 15, 2008 @ 4:31 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11492"><p>Hmmm &#8230; part of me wishes I was popular enough to merit a stalker, then again, seeing the effort and frustration involved; probably not.</p>
<p>Good hack though &#8211; I&#8217;m sure I&#8217;ll find a use for it in some mutated variant when I get the time.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://healyourchurchwebsite.com/' rel='external nofollow' class='url'>Dean P.</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11492" title="March 15, 2008 @ 4:39 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11493"><p>Great, thanks Mark.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://www.tompreuss.com/' rel='external nofollow' class='url'>Tom</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11493" title="March 15, 2008 @ 4:43 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11494"><p>Oh, and those filters are open source, MIT license.  I&#8217;ll add appropriate headers when I get a chance.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11494" title="March 15, 2008 @ 4:46 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11495"><p>I&#8217;ll gladly add those filters, and any theme, and/or any associated documentation you want, in Venus itself.</p>
<p>I also think it would be worth brainstorming to see if something like Apache&#8217;s config.d directory under Ubuntu would make sense here.  If there were a directory with a file per subscription, and the filter source itself could be included inline, this may ease maintenance.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://intertwingly.net/blog/' rel='external nofollow' class='url'>Sam Ruby</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11495" title="March 15, 2008 @ 5:07 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11496"><p>I understood very little of what you just said, but I&#8217;d be happy to brainstorm it with you, either here or over IM or whatever.  Time permitting, I&#8217;d also be willing to write a &#8220;case study&#8221; of using Venus + filters in this manner, which could become part of the official documentation.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11496" title="March 15, 2008 @ 7:25 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11497"><p>Apache 2 <a href="/web/20110806093300/http://www.redhat.com/docs/manuals/linux/RHL-9-Manual/ref-guide/ch-httpd.html#S2-HTTPD-V2-DIFF-FS">allows</a> you to do things like <code>Include conf.d/*.conf</code>.</p>
<p>Your filters require quite a bit of expertise to develop.  Let&#8217;s refactor them.  Suppose Venus could be told to look at all the files that match a glob and __import__ them.  </p>
<p>What&#8217;s the simplest syntax such files could have?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://intertwingly.net/blog/' rel='external nofollow' class='url'>Sam Ruby</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11497" title="March 15, 2008 @ 8:16 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11498"><p>> What&#8217;s the simplest syntax such files could have?</p>
<p>RDF?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11498" title="March 15, 2008 @ 8:34 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11499"><p>I haven&#8217;t looked too deeply into Venus filters but it seems that Plagger has better identified the problem. Too bad it&#8217;s in Perl.</p>
<p><a href="/web/20110806093300/http://plagger.org/" rel="nofollow">http://plagger.org</a></p>
<p class=sig>&#8212;&#8201;<cite>elided</cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11499" title="March 15, 2008 @ 9:13 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11500"><p>More seriously, writing filters in Python would be a heck of a lot easier if you passed the relevant entry from the feedparser results dict instead of an XML serialization of same.  No libxml2, no XPath, just some if statements and Python string manipulation.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11500" title="March 15, 2008 @ 9:17 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11501"><p>On a related note: Man, do I ever wish I could sanely and easily dump my feeds into a SQL database (and not lose any of the semantics of the feed). From there I could reprocess them, output them however I want (e-mail, my own web based feed reader), search them, etc. But it&#8217;s a serious pain to try and normalize RSS and Atom feeds and then jam them into a database in normal form.</p>
<p class=sig>&#8212;&#8201;<cite>elided</cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11501" title="March 15, 2008 @ 9:20 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11502"><p>Look in planet/spider.  Search for &#8220;filters&#8221;.  At that point, data is the entire feed, and entry is the specific entry.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://intertwingly.net/blog/' rel='external nofollow' class='url'>Sam Ruby</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11502" title="March 15, 2008 @ 9:29 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-11503"><p>Hmm.  Perhaps we could call XSLT filters with an XML serialization, and Python filters with a Python dict?  Might get ugly if a feed had both XSLT and Python filters, though.  Maybe we could just dictate that each feed can only have one kind of filter?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11503" title="March 15, 2008 @ 10:25 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11504"><p>Here is how I follow you in friendfeed <a href="/web/20110806093300/http://friendfeed.com/users/ed196fd4-f306-11dc-97e6-003048343a40" rel="nofollow">http://friendfeed.com/users/ed196fd4-f306-11dc-97e6-003048343a40</a></p>
<p class=sig>&#8212;&#8201;<cite>Shakeel Mahate</cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11504" title="March 15, 2008 @ 11:30 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11505"><p>Plugins (.plugin) differ from filters (other extensions, like .py and .xslt) in that while filters are forked, plugins are imported.</p>
<p>Immediately before &#8220;# apply any filters&#8221; could be an &#8220;# apply any plugins&#8221;.  Both sections of code could iterate over config.filters(feed_uri), and both can check to see if filter.endswith(&#8216;.plugin&#8217;) and act appropriately.</p>
<p>To date, I&#8217;ve only written, and am only aware of, template filters (executed by planet.splice.apply).  This means that a change to spider, such as the one described above, would not likely affect anybody.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://intertwingly.net/blog/' rel='external nofollow' class='url'>Sam Ruby</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11505" title="March 16, 2008 @ 6:13 am"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11507"><p>Actually, I was originally thinking about something more fundamental than this.</p>
<p>With your firehose, adding a subscription requires you to update one file too many in my opinion.  Ideally, the python logic would be in the configuration file itself, either that or Venus would be able to query the filter to get the uri, name, <a href="/web/20110806093300/http://en.wikipedia.org/wiki/Hackergotchi">Hackergotchi</a> or other subscription data.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://intertwingly.net/blog/' rel='external nofollow' class='url'>Sam Ruby</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11507" title="March 16, 2008 @ 9:42 am"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11531"><p>Having worked on Wall Street it scares the bejeesus out of me how these people communicate. Never mind the automated straight through processing system talking to the other automated exchange system the email that started all this probably reads something (vaguely) like</p>
<p>&#8220;&gt; FORD OK IF YOU COVER THE UNDER 22 ON THE 08/11 CTRCT. </p>
<p>DONE&#8221;</p>
<p>The net result of which is an order gets placed for a complex six million dollar trade inf Ford debt on the Euro CDS market.</p>
<p>I&#8217;m not kidding. Traders have very short attention spans, thats how they communicate. As I say it scares the crap out of me.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://milo.graytime.org/' rel='external nofollow' class='url'>Miles Thompson</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11531" title="March 18, 2008 @ 7:23 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11579"><p>You have won me over to your side of thinking. I have changed my position on error handling because of your logic (not that I&#8217;m some XML guru, but changed minds are unusual for anyone).</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://www.facebook.com/people/Tycho_Clendenny/78200312' rel='external nofollow' class='url'>Tycho Martin Clendenny</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11579" title="March 19, 2008 @ 6:00 pm"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-11607"><p>What exactly is draconian error handling?  My (possibly incorrect) understanding of the term is: reject input that doesn&#8217;t follow the specification.</p>
<p>If you have &#8220;a deterministic algorithm for graceful (non-draconian) error handling&#8221;, then it&#8217;s not really error handling in the traditional sense.  You&#8217;ve changed the specification to allow, for example, omitting the end tag in certain situations.  You still want consumers to follow the spec to the letter and reject input that doesn&#8217;t conform.  One disadvantage is that you&#8217;ve now defined a more complicated spec, which will be harder to implement correctly (though maybe it&#8217;s worth it).</p>
<p>And with these additional &#8220;normalizing&#8221; rules, it&#8217;s more likely that an input will be misinterpreted.  I feel a little lame bringing up this example again, but let&#8217;s say a program intending to write &#8220;200000&#8243; gets its output truncated somehow, which I don&#8217;t think is far-fetched.  I wouldn&#8217;t want a consumer to see &#8220;200&#8243; and apply the &#8220;implicit close tag&#8221; rule here, deterministic or not.</p>
<p>Maybe implicit close tags are a bad example.  Maybe explicit end-of-data delimiters are just one of those good ideas that you shouldn&#8217;t screw around with.  Then again, it&#8217;s a common error recovery technique in HTML and I really don&#8217;t know the kinds of rules people have in mind for XML error recovery.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110806093300/http://cakoose.com/wiki/' rel='external nofollow' class='url'>Kannan Goundan</a></cite>&#160;<a class=p href="/web/20110806093300/http://diveintomark.org/archives/2008/03/15/dead-fish#comment-11607" title="March 24, 2008 @ 12:54 am"><img alt="#" src=/web/20110806093300im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=pb id="comment-11610"><cite><a href='/web/20110806093300/http://adju.st/2008/03/links-for-2008-03-24.html' rel='external nofollow' class='url'>links for 2008-03-24 at a convenient truth</a></cite>&#160;(pingback)</li>
</ol>
<h3 id=respond>Respond privately</h3>
<p><i>I am no longer accepting public comments on this post, but you can use this form to contact me privately.  (Your message will not be published.)</i></p>
<form action="/web/20110806093300/http://wearehugh.com/public/contact.cgi" method=POST id=commentform>
<p><label for=author>Name </label><br>
<input type=text name=author id=author>
<p><label for=email>Email</label><br>
<input type=text name=email id=email></p>
<p><label for=comment>Message</label>
<textarea name=comment id=comment rows=10 cols=40></textarea></p>
<p><input type=submit value="Send message">
</p>
</form>
<p class=c>&#167;
<div class=f>
<p>
<a title="my comments here and elsewhere" href=/web/20110806093300/http://firehose.diveintomark.org/>firehose</a> &#x2027;
<a title="my current open source projects" href="/web/20110806093300/http://code.google.com/u/@UxdWQ1xUDhhBWwd%2F/">code</a> &#x2027;
<a title="my personal news aggregator" href=/web/20110806093300/http://feeds.diveintomark.org/>planet</a>
<p>&#169; 2001&#8211;present <a accesskey=9 href=/web/20110806093300/http://diveintomark.org/about>Mark Pilgrim</a>
</div>
</body>
</html>

<!-- Dynamic page generated in 0.263 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-06-14 10:13:47 -->
<!-- super cache -->




<!--
     FILE ARCHIVED ON 9:33:00 Aug 6, 2011 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:05:18 Jan 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
