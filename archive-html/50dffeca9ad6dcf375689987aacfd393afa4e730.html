<!DOCTYPE HTML>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Relative URIs in HTML [dive into mark]</title>
<link rel=alternate type=application/atom+xml href=/web/20110514120244/http://diveintomark.org/feed/>
<link rel=me type=text/html href=/web/20110514120244/http://www.google.com/profiles/pilgrim>
<link rel=search type=application/opensearchdescription+xml href=/web/20110514120244/http://wearehugh.com/public/2006/09/opensearch-full.xml title="dive into mark">
<link rel="shortcut icon" href=/web/20110514120244im_/http://diveintomark.org/favicon.ico>
<link rel=prev href="/web/20110514120244/http://diveintomark.org/archives/2003/12/31/review" title="Year in review">
<link rel=next href="/web/20110514120244/http://diveintomark.org/archives/2004/01/08/postels-law" title="There are no exceptions to Postel&#8217;s Law">
<link rel=up href="/web/20110514120244/http://diveintomark.org/archives#p1463" title="January 2004">
<link rel="alternate" type="application/rss+xml" title="dive into mark &raquo; Relative URIs in HTML Comments Feed" href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris/feed" />
<link rel='index' title='dive into mark' href='/web/20110514120244/http://diveintomark.org/' />
<link rel='prev' title='Year in review' href='/web/20110514120244/http://diveintomark.org/archives/2003/12/31/review' />
<link rel='next' title='There are no exceptions to Postel&#8217;s Law' href='/web/20110514120244/http://diveintomark.org/archives/2004/01/08/postels-law' />
<link rel='canonical' href='/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris' />
<link rel='shortlink' href='/web/20110514120244/http://diveintomark.org/?p=1463' />
<meta name="description" content="RFC 1808 defines how to resolve relative URIs, given a relative URI and a base URI. Section 12.4.1 of the HTML specification defines how to find the base URI of an HTML document. I feel oddly compelled to explain this to you.">
<meta name="keywords" content="html,markup,standards">
<link href="/web/20110514120244cs_/http://fonts.googleapis.com/css?family=Cabin:400,400italic,500,500italic,600,600italic,bold,bolditalic" rel=stylesheet>
<style type=text/css>
/*dive into minimalism(c)2010 Mark Pilgrim,MIT-licensed including graphics*/
html{background:white url(/web/20110514120244/http://wearehugh.com/m.jpg) no-repeat bottom right;color:black}
body{font:normal medium Cabin,serif;margin:1.75em auto;width:40em;line-height:1.75;word-spacing:0.1em}
em,i,blockquote{font-family:Cabin,serif;font-style:oblique}
strong,b{font-family:Cabin,serif;}
pre,code,var,samp,kbd,tt{font-family:monospace}
h2,h3{font-weight:bold}
.c{font-family:'Arial Unicode MS',FreeSerif,'DejaVu Sans',sans-serif}
a{background:transparent;text-decoration:none;border-bottom:1px dotted}
a:hover{border-bottom:1px solid}
a:link{color:#1b67c9}
a:visited{color:darkorchid}
h1 a,h2 a,h3 a,#nav a,.punch a{color:inherit !important}
abbr,.p{border:0;letter-spacing:0.1em;text-transform:lowercase;font-variant:small-caps}
h1,h2,h3,p,ul,ol,#nav{margin:1.75em 0}
h1,h2,h3{font-size:medium}
h1,h2{display:inline}
h1{font-weight:normal}
pre,tt{white-space:pre-wrap;font-size:medium;line-height:2.154}
cite{font-style:normal}
img{border:0}
.framed{border:1px solid}
.cl,#arc th,#arc td,.punch p{list-style:none;margin:0;padding:0}
.cl li{margin-bottom:-1px;border-bottom:1px dotted;overflow:hidden}
.sig,.tb,.pb,blockquote{font-size:small;line-height:2.154;margin:2.154em 0;padding:0}
blockquote{font-style:oblique;border-left:1px dotted;margin-left:2.154em;padding-left:2.154em}
blockquote p{margin:2.154em 0}
.tb,.pb{margin-top:0;padding:2.154em 0}
.sig,.punch,#arc th{text-align:right}
.f,.c{text-align:center;clear:both}
#comment,#arc{width:100%}
#comment{height:14.6em;margin:0;line-height:2.154}
.me{background:papayawhip;color:black;padding:1.75em 1.75em 0 1.75em;border-top:1px dotted;margin-top:-2px}
.me>p:first-child{margin-top:0}
.punch{float:right;font-size:x-small;margin:0 0 1.75em 1.75em;line-height:1.75}
#nav + .punch + p:first-letter{float:left;color:gainsboro;padding:0.11em 4px 0 0;font:normal 4em/0.68 serif}
#arc th{padding:0 1.75em 0 0;vertical-align:baseline}
#arc{border-collapse:collapse}
figure{display:block;text-align:center;margin:1.75em 0}
figure img{display:block;margin:0 auto}
</style>
<script>_gaq=[['_setAccount','UA-7434570-2'],['_trackPageview'],['_trackPageLoadTime']];(function(){var g=document.createElement('script');g.src='//www.google-analytics.com/ga.js';g.setAttribute('async','true');document.documentElement.firstChild.appendChild(g);})();</script>
<link rel=canonical href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris">
</head>
<body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/diveintomark.org\/archives\/2004\/01\/02\/relative-uris";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "14";
var displayMonth = "May";
var displayYear = "2011";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://diveintomark.org/archives/2004/01/02/relative-uris" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20110514120244" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20101215053658/http://diveintomark.org/archives/2004/01/02/relative-uris" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="15 Dec 2010"><strong>DEC</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 12:02:44 May 14, 2011">MAY</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Jun
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20101215053658/http://diveintomark.org/archives/2004/01/02/relative-uris" title="5:36:58 Dec 15, 2010" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 12:02:44 May 14, 2011">14</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20090202130747/http://diveintomark.org/archives/2004/01/02/relative-uris" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="2 Feb 2009"><strong>2009</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 12:02:44 May 14, 2011">2011</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2012
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20110514120244*/http://diveintomark.org/archives/2004/01/02/relative-uris" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>33 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">19 May 06 - 14 May 11</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000021221101_2007:-1:030202100111_2008:-1:111121000000_2009:-1:010000000000_2010:-1:000001000011_2011:4:000010000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div id=nav><h1><a accesskey=1 href=/web/20110514120244/http://diveintomark.org/>dive into mark</a></h1> &#8227;
<a href="/web/20110514120244/http://diveintomark.org/archives#p1463">January 2, 2004</a> &#8227;
<h2>Relative URIs in HTML</h2> (<a href="/web/20110514120244/http://diveintomark.org/tag/html" rel="tag">html</a>, <a href="/web/20110514120244/http://diveintomark.org/tag/markup" rel="tag">markup</a>, <a href="/web/20110514120244/http://diveintomark.org/tag/standards" rel="tag">standards</a>)</div>
<p><a href="/web/20110514120244/http://www.faqs.org/rfcs/rfc1808.html">RFC 1808</a> defines how to resolve relative URIs, given a relative URI and a base URI.  <a href="/web/20110514120244/http://www.faqs.org/rfcs/rfc2396.html">RFC 2396</a> updates this, and <a href="/web/20110514120244/http://gbiv.com/protocols/uri/rev-2002/rfc2396bis.html">RFC 2396 is currently being rewritten</a>, which will update it further when it goes final.</p>

<p><a href="/web/20110514120244/http://www.w3.org/TR/html401/struct/links.html#h-12.4.1">Section 12.4.1 of the HTML specification</a> defines how to find the base URI of an HTML document.</p>

<p>I feel oddly compelled to explain this to you.  It is insanely complicated.</p>

<ol>
<li><a href="/web/20110514120244/http://www.w3.org/TR/html401/struct/links.html#h-12.4">Section 12.4 of the HTML specification</a> states that, if the <code>HEAD</code> element of the HTML document contains a <code>BASE</code> element, the base URI is given in the <code>href</code> attribute, which must be an absolute URI.</li>
<li><p>Section 14.14 of <a href="/web/20110514120244/http://www.faqs.org/rfcs/rfc2616.html">RFC 2616</a> defines the <code>Content-Location:</code> HTTP header.  If an HTML document is served without a <code>BASE</code> element but with a <code>Content-Location:</code> HTTP header, then that is the base URI (<a href="/web/20110514120244/http://jigsaw.w3.org/HTTP/CL/">test page</a>).  Just to make this more interesting, <code>Content-Location:</code> may itself be a relative URI, in which case it is resolved according to RFC 2396, with the URI of the HTML document as its base URI.  The resolved URI then serves as the base URI for other relative URIs within the HTML document.</p>
<p>Neither IE 6 SP1 nor Mozilla 1.6 Beta support the <code>Content-Location:</code> header, mainly because <a href="/web/20110514120244/http://support.microsoft.com/default.aspx?scid=http://support.microsoft.com:80/support/kb/articles/q218/1/80.asp&NoWebContent=1">Microsoft web servers are so buggy</a> that respecting the <code>Content-Location:</code> header <a href="/web/20110514120244/http://www.securityspace.com/s_survey/data/man.200312/firewalled_cloc.html">would cause about 10% of IIS-powered sites to break horribly</a>.</p>
<p>Finally, Mozilla does support the <code>Content-Base:</code> header, which existed in HTTP 1.0 but <a href="/web/20110514120244/http://lists.w3.org/Archives/Public/ietf-http-wg-old/1999JanApr/0087.html">was dropped from HTTP 1.1</a> due to the lack of interoperable implementations.  The IETF requires at least two interoperable implementations before a draft can become a standard.  Interoperating only with yourself is just a standards-compliant form of masturbation.</p>
</li>
<li>If neither of the previous two cases applies, the URI of the HTML document is considered the base URI.</li>
<li>If the HTML document was not served over HTTP (for instance, it was sent in an email), the HTML spec states that the base URI is undefined and relative URIs can not be resolved.  However, <a href="/web/20110514120244/http://www.faqs.org/rfcs/rfc2557.html">section 5 of RFC 2557</a> defines how to find the base URI of an HTML email, and therefore how to resolve relative URIs.  But I digress.</li>
</ol>

<p>The following HTML attributes may be relative URIs:</p>

<ul>
<li><code>&lt;a href="..."&gt;</code></li>
<li><code>&lt;applet codebase="..."&gt;</code></li>
<li><code>&lt;area href="..."&gt;</code></li>
<li><code>&lt;blockquote cite="..."&gt;</code></li>
<li><code>&lt;body background="..."&gt;</code></li>
<li><code>&lt;del cite="..."&gt;</code></li>
<li><code>&lt;form action="..."&gt;</code></li>
<li><code>&lt;frame longdesc="..."&gt;</code></li>
<li><code>&lt;frame src="..."&gt;</code></li>
<li><code>&lt;head profile="..."&gt;</code></li>
<li><code>&lt;iframe longdesc="..."&gt;</code></li>
<li><code>&lt;iframe src="..."&gt;</code></li>
<li><code>&lt;img longdesc="..."&gt;</code></li>
<li><code>&lt;img src="..."&gt;</code></li>
<li><code>&lt;img usemap="..."&gt;</code></li>
<li><code>&lt;input src="..."&gt;</code></li>
<li><code>&lt;input usemap="..."&gt;</code></li>
<li><code>&lt;ins cite="..."&gt;</code></li>
<li><code>&lt;link href="..."&gt;</code></li>
<li><code>&lt;object classid="..."&gt;</code></li>
<li><code>&lt;object codebase="..."&gt;</code></li>
<li><code>&lt;object data="..."&gt;</code></li>
<li><code>&lt;object usemap="..."&gt;</code></li>
<li><code>&lt;q cite="..."&gt;</code></li>
<li><code>&lt;script src="..."&gt;</code></li>
</ul>

<p><a href="/web/20110514120244/http://www.w3.org/TR/html401/struct/links.html#h-12.4">Section 12.4 of the HTML specification</a> states that <q cite="http://www.w3.org/TR/html401/struct/links.html#h-12.4">When present, the BASE element must appear in the HEAD section of an HTML document, before any element that refers to an external source</q>.  What if you have, say, a <code>LINK</code> element with a relative URI before the <code>BASE</code> element?  In this situation, Mozilla resolves the URI relative to the document URI (there was no <code>Content-Location:</code> HTTP header), but once it sees the <code>BASE</code> element, it resolves all further URIs relative to the URI given in the <code>href</code> of the <code>BASE</code> element.  I am not entirely convinced that this behavior is correct, but it seems reasonable, and I have codified this interpretation in my <a href="/web/20110514120244/http://diveintomark.org/tests/client/autodiscovery/html4-052.html">autodiscovery tests</a>.</p>

<p>While recently discussing the <a href="/web/20110514120244/http://gmpg.org/xfn/">XHTML Friends Network</a> with Tantek, I learned that the <code>profile</code> attribute of the <code>HEAD</code> element may actually contain multiple URIs, separated by spaces.  <a href="/web/20110514120244/http://www.w3.org/TR/html401/struct/global.html#h-7.4.1">Section 7.4.1 of the HTML specification</a> confirms this.  Presumably all of the profile URIs should be considered potentially relative, and resolved according to the <code>Content-Location:</code> HTTP header, or failing that, the document URI.  They can&#8217;t be resolved relative to the <code>href</code> attribute of the <code>BASE</code> element, since by definition, the <code>profile</code> attribute of the <code>HEAD</code> element always precedes the <code>BASE</code> element within the <code>HEAD</code> element.  Since I know of no software that does anything at all with the <code>profile</code> attribute, I can&#8217;t test how real-world implementations actually deal with this.</p>

<p>Stuff like this drives me nuts.  People ask me why my markup category is named <q>those that tremble as if they were mad</q>.  This is why.</p>

<p>Given enough good code, I should <em>always</em> be able to Do The Right Thing with your markup.</p>
<p class=c>&#167;

<h3 id=comments>Fifteen comments here (<a href=/web/20110514120244/http://diveintomark.org/recentcomments>latest comments</a>)</h3>
<ol class=cl>
<li id="comment-5636"><p>Well, I don&#8217;t want to be pedantic (he lied) but I think your rules #1 and #4 are in conflict with each other.  I don&#8217;t see why the base element shouldn&#8217;t work just because you read the HTML from a file.  For example, look at <a href="/web/20110514120244/http://www.tbray.org/testing/t.html">http://www.tbray.org/testing/t.html</a> &#8211; download it to the disk and see what your browser does with the second link.</p>
<p>Secondly, no piece on this subject is complete without some sort of nod to RFC2396 or the (much, much better) redraft now in progress at <a href="/web/20110514120244/http://www.apache.org/~fielding/uri/rev-2002/rfc2396bis.html">http://www.apache.org/~fielding/uri/rev-2002/rfc2396bis.html</a></p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.tbray.org/ongoing/' rel='external nofollow' class='url'>Tim Bray</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5636" title="January 3, 2004 @ 12:53 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-5637"><p>You&#8217;re right.  HTML in an email has no defined base URI, but HTML in a file does ( file://local/path/to/document.html ).</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5637" title="January 3, 2004 @ 1:02 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5638"><p>Relative URIs can be resolved in an HTML document sent in an email.  See RFC 2100 and RFC 2557 for more information.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://gary.burd.info/' rel='external nofollow' class='url'>Gary Burd</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5638" title="January 3, 2004 @ 2:39 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-5639"><p>Thanks Tim and Gary, I&#8217;ve updated the article with those references.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5639" title="January 3, 2004 @ 2:54 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-5640"><p>Hey, I just realized you&#8217;re the beagle guy.  Small world.</p>
<p><a href="/web/20110514120244/http://diveintomark.org/archives/2002/04/08/where_the_beagles_are">http://diveintomark.org/archives/2002/04/08/where_the_beagles_are</a></p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5640" title="January 3, 2004 @ 2:57 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5641"><p>> Section 12.4 of the HTML specification states that &#8220;When present, the BASE element must appear in the HEAD section of an HTML document, before any element that refers to an external source&#8221;. What if you have, say, a LINK element with a relative URI before the BASE element?</p>
<p>Well, since the HTML specification clearly states a requirement, I&#8217;d say that documents that don&#8217;t fulfil that requirement are invalid.  Since HTML doesn&#8217;t define error handling, you can&#8217;t expect any particular behaviour from user-agents.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.jimdabell.com/' rel='external nofollow' class='url'>Jim Dabell</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5641" title="January 3, 2004 @ 1:07 pm"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5642"><p>For extra points, compare the definition of what to do with a relative link starting with a question mark (href=&#8221;?whatever&#8221;) in RFC 1808 and RFC 2396.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.softwolves.pp.se/blog/' rel='external nofollow' class='url'>Peter Karlsson</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5642" title="January 3, 2004 @ 1:33 pm"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5643"><p>&#8220;Since HTML doesn&#8217;t define error handling, you can&#8217;t expect any particular behaviour from user-agents.&#8221;</p>
<p>This is not necessarily true.  If an unspecified feature is used widely on the www, then page authors and browser developers will tend to converge on the same expected behavior.  </p>
<p>There&#8217;s a cycle. Many page authors code to the behavior of the dominate browser, not the specification.  Browser developers tend to match the behavior expected by page authors in the interest of  providing the best user experience.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://gary.burd.info/' rel='external nofollow' class='url'>Gary Burd</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5643" title="January 3, 2004 @ 2:31 pm"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5644"><p>Gary,</p>
<p>Okay, bad choice of words :).  You may /expect/ user-agents to handle certain errors in certain ways, but it&#8217;s not coded into the specification, and so it isn&#8217;t a good idea to rely on it.</p>
<p>For specific examples of relying on certain error handling and the consequences, take a look at <a href="/web/20110514120244/http://www.htmlhelp.com/tools/validator/reasons.html">http://www.htmlhelp.com/tools/validator/reasons.html</a></p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.jimdabell.com/' rel='external nofollow' class='url'>Jim Dabell</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5644" title="January 3, 2004 @ 3:29 pm"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5645"><p>Yep, it was insanely complicated, a good read, but I am still lost.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.palacegallery.com/' rel='external nofollow' class='url'>Mike</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5645" title="January 4, 2004 @ 6:36 pm"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5646"><p>My 0.02 to add to the mess: don&#8217;t forget to mention XML Base ( <a href="/web/20110514120244/http://www.w3.org/TR/xmlbase/">http://www.w3.org/TR/xmlbase/</a> ) and the way it interacts with that ever-recurring problem of whether XHTML gets parsed as XML or as (SGML-based) HTML.  Oh yeah, and the pleasures of XLink, too.</p>
<p>With all its hacks, incompatibilities, and broken links, it is still a beautiful web.  Be accessible.  Strive to be conformant.  [Apologies to Max Ehrmann...]</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.eleves.ens.fr:8080/home/madore/' rel='external nofollow' class='url'>David</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5646" title="January 4, 2004 @ 8:35 pm"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5647"><p>David, XML Base is not specified to interact with XHTML 1.0 explicitly anywhere as far as I can see. The linking mechanism of XHTML is not based upon XLink and the XHTML 1.0 specification doesn&#8217;t mention any use of xml:base for determining relative URI&#8217;s.</p>
<p>From the xml:base specification we can read &#8220;in applications based on specifications that do not have direct or indirect normative reference to XML Base is undefined&#8221;. IMO application processing XHTML (at least version 1.0) shouldn&#8217;t make use of xml:base as it has no defined behaviour, in fact I don&#8217;t even believe it can be included in a valid XHTML document (the xml:base attribute would be identified as invalid). There of course may be differences with XHTML 2.0 (or even 1.1) but 2.0 is of course still a WIP.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.benmeadowcroft.com/' rel='external nofollow' class='url'>Ben Meadowcroft</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5647" title="January 6, 2004 @ 9:57 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5648"><p>Excuse me, but only lusted above tags can be URIs relative? How about ?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.wild-n-free.com/' rel='external nofollow' class='url'>Free Lander</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5648" title="January 7, 2004 @ 8:09 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5649"><p>Oops&#8230; =( I was asking about tag . But it didn&#8217;t show up</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.wild-n-free.com/' rel='external nofollow' class='url'>Free Lander</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5649" title="January 7, 2004 @ 8:13 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-5650"><p>Damn! I mean&#8217;t tag &#8220;Style&#8221;<br />
(may be this way it will be shown)</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20110514120244/http://www.wild-n-free.com/' rel='external nofollow' class='url'>Free Lander</a></cite>&#160;<a class=p href="/web/20110514120244/http://diveintomark.org/archives/2004/01/02/relative-uris#comment-5650" title="January 7, 2004 @ 8:15 am"><img alt="#" src=/web/20110514120244im_/http://wearehugh.com/h.png width=8 height=9></a></li>
</ol>
<h3 id=respond>Respond privately</h3>
<p><i>I am no longer accepting public comments on this post, but you can use this form to contact me privately.  (Your message will not be published.)</i></p>
<form action="/web/20110514120244/http://wearehugh.com/public/contact.cgi" method=POST id=commentform>
<p><label for=author>Name </label><br>
<input type=text name=author id=author>
<p><label for=email>Email</label><br>
<input type=text name=email id=email></p>
<p><label for=comment>Message</label>
<textarea name=comment id=comment rows=10 cols=40></textarea></p>
<p><input type=submit value="Send message">
</p>
</form>
<p class=c>&#167;
<div class=f>
<p>
<a title="my comments here and elsewhere" href=/web/20110514120244/http://firehose.diveintomark.org/>firehose</a> &#x2027;
<a title="my current open source projects" href="/web/20110514120244/http://code.google.com/u/@UxdWQ1xUDhhBWwd%2F/">code</a> &#x2027;
<a title="my personal news aggregator" href=/web/20110514120244/http://feeds.diveintomark.org/>planet</a>
<p>&#169; 2001&#8211;present <a accesskey=9 href=/web/20110514120244/http://diveintomark.org/about>Mark Pilgrim</a>
</div>
</body>
</html>

<!-- Dynamic page generated in 1.098 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-05-06 13:08:50 -->
<!-- super cache -->




<!--
     FILE ARCHIVED ON 12:02:44 May 14, 2011 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:11:51 Jan 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
