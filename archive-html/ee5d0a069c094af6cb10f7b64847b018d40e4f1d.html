<!DOCTYPE HTML>
<html lang=en>
<head>
<meta charset=utf-8>
<title>How to make a good ID in Atom [dive into mark]</title>
<link rel=alternate type=application/atom+xml href=/web/20110806085710/http://diveintomark.org/feed/>
<link rel=me type=text/html href=/web/20110806085710/http://www.google.com/profiles/pilgrim>
<link rel=author href=/web/20110806085710/http://diveintomark.org/about>
<link rel=search type=application/opensearchdescription+xml href=/web/20110806085710/http://wearehugh.com/public/2006/09/opensearch-full.xml title="dive into mark">
<link rel="shortcut icon" href=/web/20110806085710im_/http://diveintomark.org/favicon.ico>
<link rel=prev href="/web/20110806085710/http://diveintomark.org/archives/2004/05/27/howto-atom-linkblog" title="How to make a linkblog in Atom">
<link rel=next href="/web/20110806085710/http://diveintomark.org/archives/2004/05/30/pink-numbers" title="Pink Numbers">
<link rel=up href="/web/20110806085710/http://diveintomark.org/archives#p1504" title="May 2004">
<link rel='index' title='dive into mark' href='/web/20110806085710/http://diveintomark.org/' />
<link rel='prev' title='How to make a linkblog in Atom' href='/web/20110806085710/http://diveintomark.org/archives/2004/05/27/howto-atom-linkblog' />
<link rel='next' title='Pink Numbers' href='/web/20110806085710/http://diveintomark.org/archives/2004/05/30/pink-numbers' />
<link rel='canonical' href='/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id' />
<link rel='shortlink' href='/web/20110806085710/http://diveintomark.org/?p=1504' />
<meta name="description" content="Every Atom entry has a required ID, which is an unchanging, globally unique URI. Here's how to make them.">
<meta name="keywords" content="atom,howto">
<link href="/web/20110806085710cs_/http://fonts.googleapis.com/css?family=Lora" rel=stylesheet>
<style type=text/css>
/*dive into minimalism(c)2010 Mark Pilgrim,MIT-licensed including graphics*/
html{background:white url(/web/20110806085710/http://wearehugh.com/m.jpg) no-repeat bottom right;color:black}
body{font:normal medium Lora,serif;margin:1.75em auto;width:40em;line-height:1.75;word-spacing:0.1em}
em,i,blockquote{font-family:Lora,serif;font-style:oblique}
strong,b{font-family:Lora,serif;}
pre,code,var,samp,kbd,tt{font-family:monospace}
h2,h3{font-weight:bold}
.c{font-family:'Arial Unicode MS',FreeSerif,'DejaVu Sans',sans-serif}
a{background:transparent;text-decoration:none;border-bottom:1px dotted}
a:hover{border-bottom:1px solid}
a:link{color:#1b67c9}
a:visited{color:darkorchid}
h1 a,h2 a,h3 a,#nav a,.punch a{color:inherit !important}
abbr,.p{border:0;letter-spacing:0.1em;text-transform:lowercase;font-variant:small-caps}
h1,h2,h3,p,ul,ol,#nav{margin:1.75em 0}
h1,h2,h3{font-size:medium}
h1,h2{display:inline}
h1{font-weight:normal}
pre,tt{white-space:pre-wrap;font-size:medium;line-height:2.154}
cite{font-style:normal}
img{border:0}
.framed{border:1px solid}
.cl,#arc th,#arc td,.punch p{list-style:none;margin:0;padding:0}
.cl li{margin-bottom:-1px;border-bottom:1px dotted;overflow:hidden}
.sig,.tb,.pb,blockquote{font-size:small;line-height:2.154;margin:2.154em 0;padding:0}
blockquote{font-style:oblique;border-left:1px dotted;margin-left:2.154em;padding-left:2.154em}
blockquote p{margin:2.154em 0}
.tb,.pb{margin-top:0;padding:2.154em 0}
.sig,.punch,#arc th{text-align:right}
.f,.c{text-align:center;clear:both}
#comment,#arc{width:100%}
#comment{height:14.6em;margin:0;line-height:2.154}
.me{background:papayawhip;color:black;padding:1.75em 1.75em 0 1.75em;border-top:1px dotted;margin-top:-2px}
.me>p:first-child{margin-top:0}
.punch{float:right;font-size:x-small;margin:0 0 1.75em 1.75em;line-height:1.75}
#nav + .punch + p:first-letter{float:left;color:gainsboro;padding:0.11em 4px 0 0;font:normal 4em/0.68 serif}
#arc th{padding:0 1.75em 0 0;vertical-align:baseline}
#arc{border-collapse:collapse}
figure{display:block;text-align:center;margin:1.75em 0}
figure img{display:block;margin:0 auto}
</style>
<script>_gaq=[['_setAccount','UA-7434570-2'],['_trackPageview'],['_trackPageLoadTime']];(function(){var g=document.createElement('script');g.src='//www.google-analytics.com/ga.js';g.setAttribute('async','true');document.documentElement.firstChild.appendChild(g);})();</script>
<link rel=canonical href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id">
</head>
<body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/diveintomark.org\/archives\/2004\/05\/28\/howto-atom-id";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "6";
var displayMonth = "Aug";
var displayYear = "2011";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://diveintomark.org/archives/2004/05/28/howto-atom-id" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20110806085710" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20110514113830/http://diveintomark.org/archives/2004/05/28/howto-atom-id" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="14 May 2011"><strong>MAY</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 8:57:10 Aug 6, 2011">AUG</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20110915110202/http://diveintomark.org/archives/2004/05/28/howto-atom-id" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="15 Sep 2011"><strong>SEP</strong></a>
		                
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20110514113830/http://diveintomark.org/archives/2004/05/28/howto-atom-id" title="11:38:30 May 14, 2011" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 8:57:10 Aug 6, 2011">6</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20110811043535/http://diveintomark.org/archives/2004/05/28/howto-atom-id" title="4:35:35 Aug 11, 2011" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"/></a>
		                
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20100620071533/http://diveintomark.org/archives/2004/05/28/howto-atom-id" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="20 Jun 2010"><strong>2010</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 8:57:10 Aug 6, 2011">2011</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20121017042313/http://diveintomark.org/archives/2004/05/28/howto-atom-id" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="17 Oct 2012"><strong>2012</strong></a>
		                
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20110806085710*/http://diveintomark.org/archives/2004/05/28/howto-atom-id" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>85 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">17 Apr 06 - 17 Oct 12</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000312212450_2007:-1:321343101422_2008:-1:211020744101_2009:-1:010000000000_2010:-1:101011000011_2011:7:000010023001_2012:-1:000010000100_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div id=nav><h1><a accesskey=1 href=/web/20110806085710/http://diveintomark.org/>dive into mark</a></h1> &#8227;
<a href="/web/20110806085710/http://diveintomark.org/archives#p1504">May 28, 2004</a> &#8227;
<h2>How to make a good ID in Atom</h2> (<a href="/web/20110806085710/http://diveintomark.org/tag/atom" rel="tag">atom</a>, <a href="/web/20110806085710/http://diveintomark.org/tag/howto" rel="tag">howto</a>)</div>
<p>Table of contents:</p>
<ul>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#introduction">Introduction</a></li>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#nohttp">Why you shouldn&#8217;t use your permalink as an Atom ID</a></li>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#nourn">Why you shouldn&#8217;t use a URN as an Atom ID</a></li>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#tag">How to construct an Atom ID using <code>tag:</code> URIs</a></li>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#other">Other ways to build valid Atom IDs</a></li>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#multiple">What if the same entry appears in multiple feeds?</a></li>
<li><a href="/web/20110806085710/http://diveintomark.org/archives/2004/05/28/howto-atom-id#summary">Summary</a></li>
</ul>

<h4 id="introduction">Introduction</h4>

<p>Every Atom entry must have a globally unique ID, in the <code>&lt;id&gt;</code> element.  This helps aggregators and directories keep track of an entry, even if it gets updated.  Some aggregators redisplay changed entries; some don&#8217;t; some track changes over time.  But before you can do any of these things, you need to uniquely identify the entry, and that&#8217;s what <code>&lt;id&gt;</code> is for.</p>

<p>There are three requirements for an Atom ID:</p>

<ol>
<li>The ID must be a valid URI, as defined by <a href="/web/20110806085710/http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>.</li>
<li>The ID must be globally unique, across all Atom feeds, everywhere, for all time.  This part is actually easier than it sounds.</li>
<li>The ID must never, ever change.</li>
</ol>

<p>There are several ways to construct an unchanging, globally unique URI, but some are better than others.</p>

<h4 id="nohttp">Why you shouldn&#8217;t use your permalink as an Atom ID</h4>

<p>It&#8217;s valid to use your permalink URL as your <code>&lt;id&gt;</code>, but I discourage it because it can create confusion about which element should be treated as the permalink.  Developers who don&#8217;t read specs will look at your Atom feed, and they see two identical pieces of information, and they pick one and use it as the permalink, and some of them will pick incorrectly.  Then they go to another feed where the two elements are not identical, and they get confused.</p>

<p>In Atom, <code>&lt;link rel="alternate"&gt;</code> is <em>always</em> the permalink of the entry.  <code>&lt;id&gt;</code> is <em>always</em> a unique identifier for the entry.  Both are required, but they serve different purposes.  An entry ID should never change, even if the permalink changes.</p>

<p>&#8220;Permalink changes&#8221;?  Yes, permalinks are not as permanent as you might think.  Here&#8217;s an example that happened to me.  My permalink URLs were automatically generated from the title of my entry, but then I updated an entry and changed the title.  Guess what, the &#8220;permanent&#8221; link just changed!  If you&#8217;re clever, you can use an HTTP redirect to redirect visitors from the old permalink to the new one (and I did).  But you can&#8217;t redirect an ID.</p>

<p><em>The ID of an Atom entry must never change!</em>  Ideally, you should generate the ID of an entry once, and store it somewhere.  If you&#8217;re auto-generating it time after time from data that changes over time, then the entry&#8217;s ID will change, which defeats the purpose.</p>

<h4 id="nourn">Why you shouldn&#8217;t use a URN as an Atom ID</h4>

<p><a href="/web/20110806085710/http://www.ietf.org/rfc/rfc2141.txt">RFC 2141</a> defines a syntax for URNs.  URNs specifically designed to be used as globally unique identifiers.  They are valid URIs.  They look sort of like URLs you might type in a browser, but URNs are not designed to be clickable.  They&#8217;re just structured identifiers.</p>

<p>So why not use them?  Well, the main reason is that they require registration (described in <a href="/web/20110806085710/http://www.ietf.org/rfc/rfc3406.txt">RFC 3406</a>).  You can&#8217;t just use the domain name you&#8217;ve already registered; URN namespace registration is a separate process.</p>

<p>If you have a registered URN namespace, you can use it to generate Atom IDs.  But if you haven&#8217;t registered one, you can&#8217;t just make up a URN and publish it.  URNs don&#8217;t work that way.</p>

<h4 id="tag">How to construct an Atom ID using <code>tag:</code> URIs</h4>

<p>However, there is an emerging standard that allows anyone to construct globally unique identifiers without additional registration: <a href="/web/20110806085710/http://www.taguri.org/">tag URIs</a>.  To construct a tag URI, you only need a domain name or an email address.  (A subdomain works too.)  For the purposes of this tutorial, I&#8217;m going to assume that you have your own domain name or subdomain, and that you don&#8217;t wish to publish your email address for spammers to scrape.</p>

<p>Start with your permalink URL.  I&#8217;ll use <code class="codehilite">http://diveintomark.org/archives/2004/05/27/howto-atom-linkblog</code>, a real example of a recent post.  Your permalink may look different; it may not contain a date; it may just use a numeric ID; it may contain a fragment identifier (with a <code>#</code> mark).  That&#8217;s OK, you can make a <code>tag:</code> URI out of any URL.</p>

<ol>
<li><p>Discard everything before the domain name.</p>
<p>Progress so far: <code class="codehilite">diveintomark.org/archives/2004/05/27/howto-atom-linkblog</code></p></li>
<li><p>Change all <code>#</code> characters to <code>/</code></p>
<p>Progress so far: unchanged</p></li>
<li><p>Immediately after the domain name, insert a comma, then the year-month-day that the article was published, then a colon.  Be sure to use a four-digit year, two-digit month, and two-digit day.  Don&#8217;t forget the colon.</p>
<p>Progress so far: <code class="codehilite">diveintomark.org,2004-05-27:/archives/2004/05/27/howto-atom-linkblog</code></p></li>
<li><p>Add <code>tag:</code> at the beginning.  (Don&#8217;t add slashes; it&#8217;s just &#8220;<code>tag:</code>&#8220;.  That&#8217;s a common mistake.)</p>
<p>Progress so far: <code class="codehilite">tag:diveintomark.org,2004-05-27:/archives/2004/05/27/howto-atom-linkblog</code></p></li>
</ol>

<p>That&#8217;s it!  There are other ways to create valid <code>tag:</code> URIs, but this procedure works for any URL.</p>

<p>The only potential problem here is that if your permalinks may change over time (for example, if they are based on title and you modify titles after posting, or if you change your permalink URL scheme entirely), you must not recompute the <code>tag:</code> URI when the permalink changes.  Ideally, you should build the Atom ID once and then store it with the rest of the entry data.  If this is not feasible, and if you can not guarantee that your permalinks will never change, there are some other ways to build valid <code>tag:</code> URIs that you might want to consider instead.</p>

<h4 id="other">Other ways to build valid Atom IDs</h4>

<ul>
<li><p><strong>By some internal key</strong>, such as the primary key on your database&#8217;s entry table.  For example, in Movable Type, the <code>&lt;$MTEntryID$&gt;</code> template tag will give you the primary key from the <code>mt_entry</code> table.  This key will never change for a given entry.  It&#8217;s not a valid <code>tag:</code> URI all by itself (it&#8217;s just a number), but it can be used to construct a valid <code>tag:</code> URI.</p>
<p>Example: <code class="codehilite">tag:diveintomark.org,2004-05-27:1192</code> (the <code>&lt;$MTEntryID$&gt;</code> was 1192)</p>
<p>The only potential problem here is a lack of portability.  I recently switched publishing tools, and the import/export routine did not capture these database keys.  All of my entry IDs changed.  I am a bad person.  This experience was partly what prompted me to write this tutorial.</p>
<p>And obviously, if your publishing system does not use a database, then this technique is not for you.  Sorry, Rael.</p>
</li>
<li><p><strong>By entry creation date.</strong>  If your publishing tool tracks an unchangeable entry date (that is, a date that doesn&#8217;t change when the entry is updated, and is not modifiable by the end user), you can use it to create a <code>tag:</code> URI.</p>
<p>Example: <code class="codehilite">tag:diveintomark.org,2004-05-27:/archives/20040527110347</code></p>
<p>In this case, the entry creation date was 2004-05-27 at 11:03:47 AM.  Spaces are not allowed in a <code>tag:</code> URI, so I mushed together the year, month, day, hour, minute, and second.</p>
<p>The only potential problem here is that you must guarantee in advance that no two entries will be published at exactly the same time, since then they would share the same entry ID, which defeats the purpose.  For single-author feeds this is generally not a problem, and this is how I generate my Atom IDs now.</p>
</li>
</ul>

<h4 id="multiple">What if the same entry appears in multiple feeds?</h4>

<p>If the same entry appears in two different feeds, it must have the same ID in both places.  This is not an exception to the &#8220;globally unique&#8221; rule; it&#8217;s an integral part of it.  An entry&#8217;s ID is the key for <em>that entry</em> across all time and space.  If the same entry appears in two places, it must have the same ID in both places &#8212; otherwise it&#8217;s not really the same entry.</p>

<p>How could this happen?</p>

<ul>
<li>Category feeds on a site, where an entry appears in multiple categories</li>
<li>Cross-site feeds, like those &#8220;Planet XYZ&#8221; sites that aggregate content from the sites of several contributors.</li>
</ul>

<p>In the case of multiple feeds produced by the same site, you just need to make sure that the way you are constructing your Atom IDs will generate the same ID in both places.  Make sure the ID is not based on the URL of the feed in which it appears, or the category name, or some other data that is different between the feeds in which the entry appears.</p>

<p>In the case of sites that aggregate content from multiple sites, the aggregator script should preserve the original <code>&lt;id&gt;</code> element from the entries of each feed.</p>

<p>How aggregators deal with duplicate entries is entirely up to them.  If an entry appears in two feeds, and you&#8217;re subscribed to both feeds, some aggregators may display it in both places, but mark it as &#8220;read&#8221; in both feeds once you read it once.  The behavior of client-side software is entirely up to the client-side developer.  The only thing <code>&lt;id&gt;</code> does is try to give developers the ability to make those decisions without complicated and error-prone heuristics.</p>

<h4 id="summary">Summary</h4>

<p>An Atom ID is an <strong>unchanging, globally unique URI</strong>.  All parts of that are important.  If an entry&#8217;s ID changes over time, that defeats the purpose.  If you&#8217;re reusing IDs for different entries, that <em>really</em> defeats the purpose.  There are several techniques for constructing unchanging, globally unique URIs, and you should use whichever one is easiest for you.</p>
<p class=c>&#167;

<h3 id=respond>Respond privately</h3>
<p><i>I am no longer accepting public comments on this post, but you can use this form to contact me privately.  (Your message will not be published.)</i></p>
<form action="/web/20110806085710/http://wearehugh.com/public/contact.cgi" method=POST id=commentform>
<p><label for=author>Name </label><br>
<input type=text name=author id=author>
<p><label for=email>Email</label><br>
<input type=text name=email id=email></p>
<p><label for=comment>Message</label>
<textarea name=comment id=comment rows=10 cols=40></textarea></p>
<p><input type=submit value="Send message">
</p>
</form>
<p class=c>&#167;
<div class=f>
<p>
<a title="my comments here and elsewhere" href=/web/20110806085710/http://firehose.diveintomark.org/>firehose</a> &#x2027;
<a title="my current open source projects" href="/web/20110806085710/http://code.google.com/u/@UxdWQ1xUDhhBWwd%2F/">code</a> &#x2027;
<a title="my personal news aggregator" href=/web/20110806085710/http://feeds.diveintomark.org/>planet</a>
<p>&#169; 2001&#8211;present <a accesskey=9 href=/web/20110806085710/http://diveintomark.org/about>Mark Pilgrim</a>
</div>
</body>
</html>

<!-- Dynamic page generated in 0.345 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-06-13 10:10:02 -->
<!-- super cache -->




<!--
     FILE ARCHIVED ON 8:57:10 Aug 6, 2011 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:11:01 Jan 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
