<!DOCTYPE HTML>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Web Site Optimization review [dive into mark]</title>
<link rel=alternate type=application/atom+xml href=/web/20100620055016/http://diveintomark.org/feed/>
<link rel=me type=text/html href=/web/20100620055016/http://www.google.com/profiles/pilgrim>
<link rel=search type=application/opensearchdescription+xml href=/web/20100620055016/http://wearehugh.com/public/2006/09/opensearch-full.xml title="dive into mark">
<link rel="shortcut icon" href=/web/20100620055016im_/http://diveintomark.org/favicon.ico>
<link rel=prev href="/web/20100620055016/http://diveintomark.org/archives/2003/03/24/pure_css_tabs" title="Pure CSS tabs">
<link rel=next href="/web/20100620055016/http://diveintomark.org/archives/2003/03/26/only_200ms_from_home" title="Only 200ms from home">
<link rel=up href="/web/20100620055016/http://diveintomark.org/archives#p1295" title="March 2003">
<link rel="alternate" type="application/rss+xml" title="dive into mark &raquo; Web Site Optimization review Comments Feed" href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review/feed" />
<link rel='index' title='dive into mark' href='/web/20100620055016/http://diveintomark.org/' />
<link rel='prev' title='Pure CSS tabs' href='/web/20100620055016/http://diveintomark.org/archives/2003/03/24/pure_css_tabs' />
<link rel='next' title='Only 200ms from home' href='/web/20100620055016/http://diveintomark.org/archives/2003/03/26/only_200ms_from_home' />
<link rel='canonical' href='/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review' />
<meta name="description" content="Smart people have said nice things about Speed Up Your Site. I have not read the book, but the markup on the book's companion site is impressively optimized.">
<meta name="keywords" content="apache,gzip">
<style type=text/css>
/*dive into minimalism(c)2010 Mark Pilgrim,MIT-licensed including graphics*/
@import url(/web/20100620055016/http://fonts.googleapis.com/css?family=Vollkorn);
html{background:white url(/web/20100620055016/http://wearehugh.com/m.jpg) no-repeat bottom right;color:black}
body{font:normal medium Vollkorn,'Gill Sans','Gill Sans MT',sans-serif;margin:1.75em auto;width:40em;line-height:1.75;word-spacing:0.1em}
h2,h3{font-weight:bold}
blockquote{font-style:oblique}
.c{font-family:'Arial Unicode MS',FreeSerif,'DejaVu Sans',sans-serif}
a{background:transparent;text-decoration:none;border-bottom:1px dotted}
a:hover{border-bottom:1px solid}
a:link{color:#1b67c9}
a:visited{color:darkorchid}
h1 a,h2 a,h3 a,#nav a,.punch a{color:inherit !important}
abbr,.p{border:0;letter-spacing:0.1em;text-transform:lowercase;font-variant:small-caps}
h1,h2,h3,p,ul,ol,#nav{margin:1.75em 0}
h1,h2,h3{font-size:medium}
h1,h2{display:inline}
h1{font-weight:normal}
pre,tt{white-space:pre-wrap;font-size:medium;line-height:2.154}
cite{font-style:normal}
img{border:0}
.framed{border:1px solid}
.cl,#arc th,#arc td,.punch p{list-style:none;margin:0;padding:0}
.cl li{margin-bottom:-1px;border-bottom:1px dotted;overflow:hidden}
.sig,.tb,.pb,blockquote{font-size:small;line-height:2.154;margin:2.154em 0;padding:0}
blockquote{font-style:oblique;border-left:1px dotted;margin-left:2.154em;padding-left:2.154em}
blockquote p{margin:2.154em 0}
.tb,.pb{margin-top:0;padding:2.154em 0}
.sig,.punch,#arc th{text-align:right}
.f,.c{text-align:center;clear:both}
#comment,#arc{width:100%}
#comment{height:14.6em;margin:0;line-height:2.154}
.me{background:papayawhip;color:black;padding:1.75em 1.75em 0 1.75em;border-top:1px dotted;margin-top:-2px}
.me>p:first-child{margin-top:0}
.punch{float:right;font-size:x-small;margin:0 0 1.75em 1.75em;line-height:1.75}
#nav + .punch + p:first-letter{float:left;color:gainsboro;padding:0.11em 4px 0 0;font:normal 4em/0.68 serif}
#arc th{padding:0 1.75em 0 0;vertical-align:baseline}
#arc{border-collapse:collapse}
figure{display:block;text-align:center;margin:1.75em 0}
figure img{display:block;margin:0 auto}
</style>
<script>_gaq=[['_setAccount','UA-7434570-2'],['_trackPageview']];(function(){var g=document.createElement('script');g.src='//www.google-analytics.com/ga.js';g.setAttribute('async','true');document.documentElement.firstChild.appendChild(g);})();</script>
<link rel=canonical href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review">
</head>
<body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/diveintomark.org\/archives\/2003\/03\/25\/web_site_optimization_review";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "20";
var displayMonth = "Jun";
var displayYear = "2010";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://diveintomark.org/archives/2003/03/25/web_site_optimization_review" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20100620055016" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20090126022711/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="26 Jan 2009"><strong>JAN</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 5:50:16 Jun 20, 2010">JUN</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Jul
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20090126022711/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review" title="2:27:11 Jan 26, 2009" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 5:50:16 Jun 20, 2010">20</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20090126022711/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="26 Jan 2009"><strong>2009</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 5:50:16 Jun 20, 2010">2010</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2011
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20100620055016*/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>25 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">20 Apr 06 - 20 Jun 10</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000201113000_2007:-1:010112100011_2008:-1:110110021000_2009:-1:100000000000_2010:5:000001000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div id=nav><h1><a accesskey=1 href=/web/20100620055016/http://diveintomark.org/>dive into mark</a></h1> &#8227;
<a href="/web/20100620055016/http://diveintomark.org/archives#p1295">March 25, 2003</a> &#8227;
<h2>Web Site Optimization review</h2> (<a href="/web/20100620055016/http://diveintomark.org/tag/apache" rel="tag">apache</a>, <a href="/web/20100620055016/http://diveintomark.org/tag/gzip" rel="tag">gzip</a>)</div>
<p>Smart people <a href="/web/20100620055016/http://www.zeldman.com/daily/0103d.shtml#shelf" title="Zeldman's positive review">have said nice things</a> about <a href="/web/20100620055016/http://www.websiteoptimization.com/">Speed Up Your Site</a>.  I have not read the book (although the author did offer me a free review copy, thanks, wish I had the time), but the markup on the book&#8217;s companion site is impressively optimized.  The home page all but validates (looks like a typo), uses better-than-average semantic markup, <em>and</em> looks good in Netscape 4.  That&#8217;s more that I can say for my own sites.</p>

<p>Any sort of optimization is a dangerous numbers game; there&#8217;s always the danger of over-optimizing for one thing (like download speed) and accidentally degrading the experience for some number of your users.  The markup on the Web Site Optimization site seems to strike a balance; it even uses a DOCTYPE (on the home page, although inner pages do not), and <code>alt</code> attributes for its images.</p>

<p>In the spirit of continuing the discussion, here are a few further suggestions for optimizing the Web Site Optimization home page.  These are in no way a reflection on the book itself, which as I mentioned, I have not read.  Some of the more advanced ones require server-level access, or at least <code>.htaccess</code> access.  Some of these I could apply to my own sites, but then, I&#8217;m not the one hawking a book.</p>

<ol>
<li><p>Use <code>></code> instead of <code>&amp;gt;</code>.  Only <code>&lt;</code> needs to be escaped.</p></li>
<li><p>Use <code>&lt;p id="foot"&gt;</code> instead of <code>&lt;div id="foot"&gt;&lt;p&gt;&lt;/div&gt;</code></p></li>
<li><p>You&#8217;re using HTML 4, so you don&#8217;t need to close your <code>&lt;p&gt;</code> or <code>&lt;li&gt;</code> tags.</p></li>
<li><p>On links to external sites, eliminate the <code>www.</code> from the URL if the remote server supports it (most do).</p></li>
<li><p>Get rid of your <code>meta name="keywords"</code>.  Search engines don&#8217;t care.</p></li>
<li><p>Get rid of your <code>meta http-equiv="Content-Type"</code> tag.  Put this line in your Apache <code>.htaccess</code> file to send the Content-type in the HTTP headers instead:</p>
<blockquote>
<p><code>AddType text/html;charset=iso-8859-1 .html</code></p>
</blockquote>
<li><p>And finally, the tip that trumps all other tips: use mod_gzip (Apache 1.3.x) or mod_deflate (Apache 2.x).  Most modern browsers support gzip compression, and most pages compress 60% or more.  The 7K home page would compress to 3K.  There are tutorials on <a href="/web/20100620055016/http://webcompression.org/">webcompression.org</a>, and a free analyzer on <a href="/web/20100620055016/http://leknor.com/code/gziped.php">leknor.com</a>.</p></li>
</ol>
<p class=c>&#167;

<h3 id=comments>Fifty one comments here (<a href=/web/20100620055016/http://diveintomark.org/recentcomments>latest comments</a>)</h3>
<ol class=cl>
<li id="comment-1030"><p>Could I get a reason why the &#8216;www.&#8217; should be removed fro the URL? Is there a reason beyond saving four keystrokes?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.robbyb.com/' rel='external nofollow' class='url'>RobbyB</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1030" title="March 25, 2003 @ 3:37 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-1031"><p>I mean remove it from the HREF of the A tag, to save 4 bytes.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1031" title="March 25, 2003 @ 3:41 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1032"><p>> On links to external sites, eliminate the www. from the URL if the remote server supports it (most do).</p>
<p>The problem is not the server support, but whether there&#8217;s a DNS entry for the domain name without the &#8220;www.&#8221; that resolves to an A (or soon AAAA ;-) record</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://beat.bolli.homeip.net/' rel='external nofollow' class='url'>Beat Bolli</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1032" title="March 25, 2003 @ 3:47 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1033"><p>You can&#8217;t just remove www. from URLs. You have the use the URLs the way they are advertised. F.e. if you go to w3.org, the server will redirect you to <a href="/web/20100620055016/http://www.w3.org/" rel="nofollow">http://www.w3.org</a>. So they want you to use that URL. Why? Because a lot of web tools rely on consistent URLs.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://w3future.com/weblog/' rel='external nofollow' class='url'>Sjoerd Visscher</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1033" title="March 25, 2003 @ 4:02 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1034"><p>Good optimisation suggestions, especially the trump card gzip. If IIS 5.0 users want to get in on the action they can enable it on the &#8220;Services&#8221; tab of the &#8220;WWW Service Master Properties&#8221; dialog.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.benmeadowcroft.com/' rel='external nofollow' class='url'>BenM</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1034" title="March 25, 2003 @ 4:35 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1035"><p>A really-well-configured site accepts [nothing], w., ww., <a href="/web/20100620055016/http://www/" rel="nofollow">http://www.</a>, and wwww. as hostnames for the homepage.<br />
Mine are partway there.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://joeclark.org/weblogs/' rel='external nofollow' class='url'>Joe Clark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1035" title="March 25, 2003 @ 4:41 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1036"><p>Does anyone know if the AddType command mentioned in Mark&#8217;s article works on the Zeus web server? I&#8217;d love to use it to cut out all those meta elements.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://jessey.net/blog/' rel='external nofollow' class='url'>Simon Jessey</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1036" title="March 25, 2003 @ 5:01 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1037"><p>3.  You already mentioned that it works well with Netscape 4, but as I recall, there are a few issues with omitting closing p and li tags with that browser, however legal it may be.</p>
<p>6.  I thought that CERT put out a warning advising people to explicitly specify the charset inside the document?  What happens when somebody saves the document to disk and does not have the ability to read http headers?</p>
<p>7.  The use of mod_gzip is not universally good.  Apart from the cpu time involved, you need to buffer dynamic pages completely, and there are issues with older browsers and external objects like css and javascript files.  It also reduces cache effectiveness, as separate copies have to be cached for each accept-encoding header (could vary from nothing, to gzip alone, to gzip and compress, deflate, and so on&#8230;)</p>
<p class=sig>&#8212;&#8201;<cite>Anonymous</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1037" title="March 25, 2003 @ 5:14 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1038"><p>>> Does anyone know if the AddType command mentioned in Mark&#8217;s article works on the Zeus web server?</p>
<p>Apparently, it doesn&#8217;t, darn it. Thanks to Richard Page-Wood at <a href="/web/20100620055016/http://echoweb.org/">http://echoweb.org</a> for testing it.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://jessey.net/blog/' rel='external nofollow' class='url'>Simon Jessey</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1038" title="March 25, 2003 @ 5:25 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-1039"><p>Re: Netscape 4 and end tags.  This is what scientists call a verifiable hypothesis.  I saved a copy of his home page locally, stripped all ending P and LI tags, did not see any difference in any browser, including Netscape 4.</p>
<p>Re: Content-type.  Yes, there&#8217;s a small possibility of a user who saves the page locally and whose browser is not set to auto-detect character encoding, but so what?  As far as I can tell (having read the site and the sample chapter the Zeldman linked to), the entire site/book is about optimizing for interactive use, and the only metric is download time.  That&#8217;s certainly the only metric his interactive site analyzer measures.</p>
<p><a href="/web/20100620055016/http://www.websiteoptimization.com/services/analyze/">http://www.websiteoptimization.com/services/analyze/</a></p>
<p>Re: mod_gzip.  Again, so what?  This site puts its CSS inline (BTW, an interesting technique that trades perceived initial speed for overall speed, since in the long run the user will end up downloading and re-downloading the same CSS rules for every page).  This home page is static HTML, and it&#8217;s 7K, and it could be 3K, but it&#8217;s not, because the server doesn&#8217;t use mod_gzip.  That&#8217;s one hell of an optimization, wouldn&#8217;t you say?</p>
<p>(Also note that the analyzer tool doesn&#8217;t take gzip compression into account when calculating download time.  I would classify this as a bug.)</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1039" title="March 25, 2003 @ 6:50 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1040"><p>you can&#8217;t ignore the www in the URL&#8217;s since </p>
<p><a href="/web/20100620055016/http://csus.edu/">http://csus.edu</a></p>
<p>is not the same as</p>
<p><a href="/web/20100620055016/http://www.csus.edu/">http://www.csus.edu</a></p>
<p class=sig>&#8212;&#8201;<cite>Anonymous</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1040" title="March 25, 2003 @ 6:56 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-1041"><p>*sigh*  As I said, you should strip the &#8220;www.&#8221; prefix if and only if the remote server supports it.  Obviously if <a href="/web/20100620055016/http://www.foo.com/" rel="nofollow">http://www.foo.com</a> is the only address that works, you&#8217;re stuck with it, but if foo.com and <a href="/web/20100620055016/http://www.foo.com/" rel="nofollow">http://www.foo.com</a> end up at the same place, you&#8217;re wasting 4 bytes by linking to <a href="/web/20100620055016/http://www.foo.com/" rel="nofollow">http://www.foo.com</a>.  I know that sounds trivial, but that&#8217;s the point of the book (as far as I can tell &#8212; the sample chapter on Javascript advocated using shorter variable names).</p>
<p>As for servers that visibly redirect to their www. cousin, I say still point to the shorter version.  You save the bytes, and users will blame the remote server for the speed difference (as they should, frankly, because visibly redirecting from foo.com to <a href="/web/20100620055016/http://www.foo.com/" rel="nofollow">http://www.foo.com</a> is braindead).</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1041" title="March 25, 2003 @ 7:04 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1042"><p>As far as dropping the leading &#8216;www.&#8217; goes, what about things like pingback?  You link to the article (which, if things are set up right, will redirect to the &#8216;www.&#8217; version), send a ping, the pingback server looks at your document for the permalink (to avoid spamming), and discards the pingback because it isn&#8217;t found.</p>
<p class=sig>&#8212;&#8201;<cite>Anonymous</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1042" title="March 25, 2003 @ 8:06 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1043"><p>Why discard meta name=&#8221;keywords&#8221; tags? Do no search engines use that tag when indexing a site?</p>
<p class=sig>&#8212;&#8201;<cite>Daniel Gotilla</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1043" title="March 25, 2003 @ 8:18 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1044"><p>My suggestions, based on a quick look at the front page:</p>
<p>1.  There are plenty of linebreaks and other whitespace that can be eliminated.  No functional difference, yet will save more than the four bytes saved by dropping the &#8216;www.&#8217;s.  Preprocessing can do this.</p>
<p>2.  The front page looks fairly static, but no last-modified or etag headers are sent, and no expires headers are sent either.  Efficient caching would do a hell of a lot more than saving a few bytes here and there.</p>
<p>3.  No content-length header.  This removes any ability to use http 1.1 pipelining.</p>
<p>4.  I would say that, for a single user, yes, the percieved load time would be reduced by embedded css.  However, no websites have a single user.  If the styling were separated out into an external stylesheet, and efficient caching applied to it, the overall load on the server would reduce, giving better response times for everyone (and faster subsequent page accesses for everybody).  Even the initial page load might be faster &#8211; a copy of a stylesheet cached nearby may very well be faster than an embedded stylesheet that has to come all the way from the origin server.</p>
<p class=sig>&#8212;&#8201;<cite>Anonymous</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1044" title="March 25, 2003 @ 8:18 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-1045"><p>Re: #15.  Agreed on all counts.  As I touched on (tangentially), optimization is a dangerous numbers game.  Optimize a single page and you miss the site-wide optimizations.  Optimize for a single client and you miss the audience-wide optimizations.    Over-optimize your markup and you miss out on important accessibility features.  (Adrian&#8217;s GetContentSize tool brought up some of these issues a while ago.)</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1045" title="March 25, 2003 @ 9:33 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1046"><p>Just to nitpick, comment 15.3 isn&#8217;t true.  The server uses chunking if you try connection: keep-alive<br />
I.e. it sends a count, then a chunk of that length, then another count and chunk until the file is done.  Then it sends a chunk count of 0.  You can still pipeline the next response after that.</p>
<p class=sig>&#8212;&#8201;<cite>Aryeh Sanders</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1046" title="March 25, 2003 @ 11:54 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=tb id="comment-1076"><cite><a href='/web/20100620055016/http://refugio.f2o.org/archivos/000516.php' rel='external nofollow' class='url'>El Refugio</a></cite>&#160;(trackback)</li>
<li id="comment-1047"><p>Optimizing is cool. I don&#8217;t mind it in the least. But doesn&#8217;t some of this sometimes get to the point of being a tad anal?</p>
<p>How much of a speed difference is 4k?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://ihorace.com/' rel='external nofollow' class='url'>Marty</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1047" title="March 26, 2003 @ 12:54 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=tb id="comment-1077"><cite><a href='/web/20100620055016/http://www.zopenotes.com/004235.html' rel='external nofollow' class='url'>Zope Notes</a></cite>&#160;(trackback)</li>
<li id="comment-1048"><p>Mark,</p>
<p>Thanks for the critical review of my new site. It is great to see other speed buffs scrutinize my site devoted to speed. Many of the suggestions you offer are on the TTD list, I figured at 7K or so with 3 graphics it loads pretty fast as it is, so I&#8217;ve been devoting my time to creating free tools, etc.</p>
<p>I went ahead and did all but suggestions #5 and #7 and saved a few bytes off the home page and interior pages. #5 &#8211; I feel that meta keywords and description tags are still important, although less so with the likes of Google.</p>
<p>#6 &#8211; Yes, I noticed this with my new host, am planning on adding this server-based char encoding header in the future. After this tweak the pages should validate with few mods.</p>
<p>#7 &#8211; Mod_gzip content encoding. Well, I&#8217;d have to disagree with you on this one. I think at around 10K for HTML you should consider mod_gzip (we devote an entire chapter in the book to compression and mod_gzip, mod_hs, ISAPI filters etc., Chapter 18). At 7K I think it is a wash for sending it as straight text as opposed to sending it compressed and having to decompress it. Mod_gzip and their ilk are wonderful for larger pages, but at some point I think you need to set a minimum page size (which you can do with mod_gzip).</p>
<p>However, since I tout mod_gzip and other modules so much in the book I think I should have it installed, and put a floor on page size to compress. </p>
<p>Mod_gzip is a great, highly configurable open source tool for compressing your text content automatically. However, it 30% slower than some other compression modules that are available, like mod_deflate-ru and mod_hs. I definitely recommend these tools for saving bandwidth and speeding up web sites. </p>
<p>Netscape 4: I sniff for NS4 and conditionally load NS4-friendly CSS or CSS for everthing else. The site is designed to look largely the same for NS4 and modern v5+ browsers that support float. Getting the float to work well with the right padding and margins was a challenge :)</p>
<p>Line breaks: Even though I advocate eliminating most line breaks in the book, I found that to get the site to work reliably with NS4.X I had to use a markup style with line breaks. Otherwise, my CSS went  wacko on me. </p>
<p>Embedded CSS: Yes, for maximum speed I like to embed my CSS at least on the front page to help eliminate HTTP requests (easy in HTML, harder in XHTML).  I plan on conditionally loading an external style sheet for the interior pages, which would be cached and save some bandwidth.</p>
<p>As you&#8217;ll discover I discuss these techniques (no www, mod_gzip, etc.) and a number of others in the book. There are some other optimizations I have planned for the front page, and the caching aspect I plan to address with my new host. Feel free to let &#8216;er rip if you find any other possible optimizations.</p>
<p>- Andy</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1048" title="March 26, 2003 @ 1:31 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1049"><p>From comment 21: &#8220;for maximum speed I like to embed my CSS at least on the front page to help eliminate HTTP requests&#8221; &#8212; Considering HTTP/1.1 supports the Connection Keep Alive, where&#8217;s the &#8220;bloat&#8221; in an external css file. You are gaining on cacheability of the stylesheet throughout the site.</p>
<p>Is this more of a &#8220;one-pager&#8221; rather than a web-site optimisation?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.isolani.co.uk/' rel='external nofollow' class='url'>Isofarro</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1049" title="March 26, 2003 @ 7:08 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1050"><p>&#8220;visibly redirecting from foo.com to <a href="/web/20100620055016/http://www.foo.com/" rel="nofollow">http://www.foo.com</a> is braindead&#8221;<br />
If <a href="/web/20100620055016/http://www.foo.com/" rel="nofollow">http://www.foo.com</a> is the correct URL for the site then redirecting&#8217;s the right thing to do &#8211; if you don&#8217;t do that then you&#8217;re effectively making multiple copies of the site available, with multiple versions of each page&#8217;s URL.<br />
I&#8217;m sure most search engines are smart enough to cope, but it&#8217;s still potentially confusing for both robots and humans if each page doesn&#8217;t have a unique URL.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.malevolent.com/' rel='external nofollow' class='url'>Matt Round</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1050" title="March 26, 2003 @ 7:14 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1051"><p>correction: &#8220;..doesn&#8217;t have a single URL&#8221;</p>
<p class=sig>&#8212;&#8201;<cite>Matt Round</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1051" title="March 26, 2003 @ 7:20 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1052"><p>I am a freshman student in web developement, I was under the impression closing your tags early on could ease the transtition into xml. How much optimisation am I actually doing by following #3?</p>
<p class=sig>&#8212;&#8201;<cite>Anonymous</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1052" title="March 26, 2003 @ 7:57 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-1053"><p>Andy, thanks for your comments and clarifications.  Sounds like a great book.  It would still be great if you could find the time to add gzip support to your web site analyzer tool and include it in the calculation of download time.  Without it, the tool is somewhat misleading, especially since, as you say, you talk so much about the benefits of compression in your book.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1053" title="March 26, 2003 @ 9:00 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1054"><p>Mark and Andy:</p>
<p>I use Content Compression for all pages I serve, regardless of size, because I have found that the benefits of fewer packets on the wire outweighs the cost in CPU time &#8212; and most Web servers should NOT be doing a great deal of intense processing anyway.</p>
<p>I am also in the position where my sites (<a href="/web/20100620055016/http://www.webcompression.org,"><a href="/web/20100620055016/http://www.webcompression.org/" rel="nofollow">http://www.webcompression.org</a>,</a> etc.) are served from a very low speed connection, so I take the performance improvements anywhere I can.</p>
<p>I also would like to point out to the folks who mention pipelining in HTTP connections that the only two browsers that implement pipeling are Opera (on all the time) and Mozilla (an option you have to set). MSIE does not use persistent connections, apparently due to limitations in the networking libraries they use.</p>
<p>smp</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.webcompression.org/' rel='external nofollow' class='url'>Stephen Pierzchala</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1054" title="March 26, 2003 @ 9:27 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1055"><p>Mark, thanks. Yes, I&#8217;ve received a lot of feature requests (including compression support) and bug reports for the new page analyzer tool I released on Monday. I&#8217;m making a list and plan on rolling many of these into the next update. Can&#8217;t guarantee they&#8217;ll all make it into this one however.</p>
<p>I went ahead and did the CSS optimization I planned and saved 383 bytes (which includes some judicious trimming) off the home page. Thanks for the inspiration. Let me know if you think of anything else.</p>
<p>The CSS caching external versus internal debate (page optimization versus site optimization). I hear you all, and have planned on making the CSS files conditionally load externally, which will save some bandwidth and speed things up a bit. This will be pretty easy with the XSSI scheme I use. For the front page I will consider it, but I like to minimize HTTP requests on the front page if at all possible.</p>
<p>Speaking of conditional XSSI I&#8217;ll need to take that into account when I look at compression, statically compressing my files won&#8217;t work in my case.</p>
<p>- Andy</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1055" title="March 26, 2003 @ 9:30 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1056"><p>RE: #23<br />
> &#8230; confusing for both robots and humans if each page doesn&#8217;t have a singel URL.</p>
<p>So, in fact, you&#8217;re saying a resource available through <a href="/web/20100620055016/http://x.com/hi">http://x.com/hi</a> shouldn&#8217;t be available through <a href="/web/20100620055016/http://x.com/hi?dummy">http://x.com/hi?dummy</a> ?</p>
<p>RE: #25<br />
If you are planning a transition to XML, or if you&#8217;re generating your HTML from XML with a transformation, I&#8217;d say you&#8217;d better use XHTML.</p>
<p>The proposed optimization only applies to HTML 4 (or any other not-XML application), because it indeed breaks XML well-formedness.<br />
If you&#8217;re already using XHTML, stick with it. If you&#8217;re using HTML 4 and not planning to migrate your system to an XML application, the suggested optimization makes sence.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.cs.vu.nl/~mvermaat/' rel='external nofollow' class='url'>Martijn</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1056" title="March 26, 2003 @ 9:37 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=me id="comment-1057"><p>Re: server-side includes.  I use them myself, with mod_gzip, and I don&#8217;t have a problem.  The compression happens later, after the page has been pieced together by the server but before it gets returned to the client.  So they play well together, no setup required.</p>
<p>Also on the topic of includes, someone mentioned that your pages don&#8217;t include Last-Modified or ETag headers.  You should look into &#8220;XBitHack full&#8221; which allows the server to send a Last-Modified date on XSSI-parsed pages (you control it by setting an otherwise unused permissions bit on the parsed files).</p>
<p><a href="/web/20100620055016/http://httpd.apache.org/docs/mod/mod_include.html#xbithack">http://httpd.apache.org/docs/mod/mod_include.html#xbithack</a></p>
<p>The result is that your server will send Last-Modified dates and respond properly to conditional GETs, which speeds up repeat access to pages that haven&#8217;t changed (the browser doesn&#8217;t have to redownload the page).</p>
<p>Andy, I know you know all this, I&#8217;m just explaining it for those who don&#8217;t.  Also, I&#8217;m putting together a collection of Apache tips/tricks based on my experiences on this site, and this is the one I wanted to write today.  Guess I have to go write it now&#8230;</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://diveintomark.org/' rel='external nofollow' class='url'>Mark</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1057" title="March 26, 2003 @ 9:48 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1058"><p>>The use of mod_gzip is not universally good. Apart from the cpu time involved, you need to buffer dynamic pages completely</p>
<p>Only the very first mod_gzip. Now they can stream the compressed content.</p>
<p>> and there are issues with older browsers and external objects like css and javascript files. </p>
<p>In a very few versions of Netscape. You can turn compression Off for these files or fine-tune the module you use.</p>
<p>>It also reduces cache effectiveness, as separate copies have to be cached for each accept-encoding header (could vary from nothing, to gzip alone, to gzip and compress, deflate, and so on&#8230;)</p>
<p>So what? 2 compressed copis in a cache are still smaller than one uncompressed. It saves room on a hard drive and provides very fast response &#8211; faster than for uncompressed pages. By the way, modern compression products like Pipeboost are caching rather than compressing solutions. Means, the trick is not how they compress, but how they cache compressed pages.</p>
<p>About the smallest files to be compressed. Right, it doesn&#8217;t make sense to compress HTML files that fit into one TCP pocket. Do you have a lot of them? :)</p>
<p class=sig>&#8212;&#8201;<cite>Konstantin Balashov</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1058" title="March 26, 2003 @ 10:54 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1059"><p>Mark/all,</p>
<p>#3 &#8211; omitting closing tags in HTML. Yes, I talk about this extensively in the book. However, I plan on transitioning to XHTML, and when I switch to strict including these closing tags makes the browser work a little bit less. You can remove closing tags for HTML pages, but make sure you test everything you do in your target browsers (NS4 in particular can be quirky). Perhaps I&#8217;ll go to HTML on the front page, and XHTML on the interior pages, still deciding.</p>
<p>XBitHack full: Yes, thanks I talk about this on p. 377 of the book, along with mod_expires. The caching aspect is something I need to address.</p>
<p>XSSI and compression: Yes, mod_gzip can dynamically compress files. I was referring to statically gzipping things and delivering them, which I can&#8217;t do (this is faster than dynamic compression). So I would need a module that dynamically compresses files. There are a few that do this for Apache, I&#8217;ll let you know which one I choose.</p>
<p>- Andy</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1059" title="March 26, 2003 @ 11:03 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1060"><p>All,</p>
<p>Konstantin is the author of Chapter 18: &#8220;Compressing the Web&#8221; in my book, &#8220;Speed Up Your Site.&#8221; Great to hear from you Konstantin.</p>
<p>- Andy</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1060" title="March 26, 2003 @ 11:09 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1061"><p>&#8220;So, in fact, youre saying a resource available through <a href="/web/20100620055016/http://x.com/hi">http://x.com/hi</a> shouldnt be available through <a href="/web/20100620055016/http://x.com/hi?dummy">http://x.com/hi?dummy</a> ?&#8221;<br />
The site itself shouldn&#8217;t unnecessarily produce inconsistent internal links (e.g. a lot of sites daftly add filenames to links back to the home page rather than using the default document), but few users are likely to add stuff on the end of the URL, whereas many will omit www and it&#8217;s easy to remedy that to force consistency.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.malevolent.com/' rel='external nofollow' class='url'>Matt Round</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1061" title="March 26, 2003 @ 11:21 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1062"><p>All:</p>
<p>Also, start looking for good things out of mod_deflate for Apache 2.0.x &#8212; I have been discussing optimization issues with the authors of this module and they will be adding a directive that will allow you to control the compression level of the output. Currently, the module is set for the equivalent of &#8220;gzip -1&#8243;; I have hacked mod_deflate.c to allow for this to be either &#8220;gzip -X&#8221;, where X ==  [1-9].</p>
<p>And, despite what is said in the book &#8212; ;-) &#8212; the mod_deflate filters have come a long way and do allow a great deal of control over what is and is not compressed. Still a ways to go before it has the granular control that mod_gzip has, but it&#8217;s improving.</p>
<p>smp</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.webcompression.org/' rel='external nofollow' class='url'>Stephen Pierzchala</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1062" title="March 26, 2003 @ 11:23 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1063"><p>Regarding compressing small files. The cut off should be around 10K which downloads pretty fast on a 28K modem. Anything smaller than that especially if they are generated dynamically will slow the server down unnecessarily.</p>
<p>Caching compressed content is still a crap shoot. Pipeboost has managed it, but I haven&#8217;t seen a public domain caching servers that know how to support it. It has to happen but the issues are many; i.e. if modified since and then uncompressing the data in response to an older browser.</p>
<p>There&#8217;s an opportunity for someone &#8211; hack mod_gzip to incorporate it into Squid &#8211; allowing for dynamic compression and caching of compressed data.</p>
<p>Peter</p>
<p class=sig>&#8212;&#8201;<cite>Peter Cranstone</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1063" title="March 26, 2003 @ 11:34 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1064"><p>Using &lt;p id=&#8221;foot&#8221;&gt; instead of &lt;div id=&#8221;foot&#8221;&gt;&lt;p&gt;&lt;/div&gt; seems like a good idea anyway: &lt;div&gt; adds no semantic or structural value in this type of case, it&#8217;s just cruft.</p>
<p class=sig>&#8212;&#8201;<cite>Arien</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1064" title="March 26, 2003 @ 12:09 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1065"><p>Re: mod_gzip, you could always have static compressed .gz files on the server and offer them using content negotiation. This was actually suggested as the &#8220;right way&#8221; to do it when there was a great debate around including mod_gzip in the Apache core. AFAIK content negotiation with Apache is quite fast.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://photomatt.net/' rel='external nofollow' class='url'>Matt</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1065" title="March 26, 2003 @ 12:22 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1066"><p>#37 &#8211; This has been changed to &#8230; on the front page.</p>
<p>#38 &#8211; Yes, but I dynamically include (using XSSI) different CSS based on what browser requests the page, so I think the best solution would be to use a module like mod_gzip or a reverse proxy like from VIGOS to dynamically compress my dynamic content. </p>
<p>They look static, but the pages are customized on the fly based on the browser. This was the only way I could get NS4 to behave and not resort to multiple link/@import stylesheets (the conventional way).</p>
<p>- Andy</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1066" title="March 26, 2003 @ 12:56 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1067"><p>In #37 I was talking about *all* these cases. Another example from the current source code would be &lt;div id=&#8221;l&#8221;&gt;&lt;table class=&#8221;d&#8221; &#8230;&gt; &#8230; &lt;/table&gt;&lt;/div&gt;. Why not &lt;table class=&#8221;d&#8221; id=&#8221;l&#8221; &#8230;&gt; &#8230; &lt;/table&gt;?</p>
<p>Then there is &lt;div id=&#8221;n&#8221;&gt; &#8230; &lt;/div&gt;. Is there no other HTML element that would give a more meaningful description?</p>
<p>(Btw, there&#8217;s a stray &lt;/dd&gt; in the source.)</p>
<p class=sig>&#8212;&#8201;<cite>Arien</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1067" title="March 26, 2003 @ 1:28 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1068"><p>#36 &#8220;&#8230;10K which downloads pretty fast on a 28K modem.&#8221;<br />
Lets do the math.<br />
8 bits = 1 Byte<br />
28.8 kbps / 8 = 3.6 KBps<br />
10KB / 3.6KBps = 2.8 seconds</p>
<p>with 60% compression<br />
4KB / 3.6KBps = 1.2 seconds</p>
<p>A difference of 1.6 seconds.  It adds up over the course of a day.  Compound that by the fact that 80% of users are still connecting with dial-up.</p>
<p>Compression may not get you a parade, but you might earn the respect of your peers.</p>
<p class=sig>&#8212;&#8201;<cite>Peter</cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1068" title="March 26, 2003 @ 3:35 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1069"><p>All,</p>
<p>What a wonderful discussion we have going here :)</p>
<p>#40 &#8211; Stray dd eliminated, tx Arien.  </p>
<p>div and table vs. table? I suppose I could get rid of this &#8220;l&#8221; div, this is an artifact of the old design, the table allowed me to align things reliably. I&#8217;ll put this on my TTD list for next rev.</p>
<p>Minimum file size to compress? &#8211; I did some research on this for you all, in light of all the interest in this issue. It appears that there is some disagreement on what is the minimum file size to compress, and my initial floor may have been too high.</p>
<p>Kevin Kiley, the author of mod_gzip, says it defaults to 300 bytes for the minimum size to compress. mod_gzip also has some check logic that prevents sending compressed files larger than the original, mod_deflate for Apache 2.0 does not.</p>
<p>Konstantin Balashov says use a floor of 1 TCP/IP packet (adjusts with connection speed, 576 bytes for slower connections, 1500 MTU for faster, which drops down to 1160 for first packet in some cases w/ overhead) for minimum file size to compress. He also says that a 5-7 KB floor is reasonable.</p>
<p>Igor Sysoev, author of mod_deflate ru, says that the minimum file size should be around 4K.</p>
<p>Peter Cranstone says 10K is a reasonable floor.</p>
<p>How low you go also depends on how heavily loaded your server is. Is the compression software or hardware based? On the same server? Total number of small files? (these are common on the Net), etc. You can compress tiny files, but the additional load, especially for dynamic files, may slow server response time.</p>
<p>So it appears that I may have to rethink my statement in #21-7 re not compressing my 7K home page. For slower modems (not 80% but 67.5% of home users connect at 56Kbps or less), especially cell (9.6Kbps), 14.4Kbps, and 28.8Kbps download time still dominates the delay these users experience. So as long as it doesn&#8217;t unduly slow down the server, and speeds up the user&#8217;s experience, compression makes sense. </p>
<p>Installing mod_gzip etc. will also save me some bandwidth site-wide, which is a good thing.</p>
<p>- Andy</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1069" title="March 26, 2003 @ 5:04 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1070"><p>Does the optimizer take into account background images?  On a site I&#8217;m developing, it claims the number of images is zero, which is true of the HTML, but not of the CSS.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.richarderiksson.com/movableblog/' rel='external nofollow' class='url'>Richard</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1070" title="March 26, 2003 @ 5:36 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1071"><p>Does the analyzer take into account background images?  On a site I&#8217;m developing, it claims the number of images is zero, which is true of the HTML, but not of the CSS.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.richarderiksson.com/movableblog/' rel='external nofollow' class='url'>Richard</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1071" title="March 26, 2003 @ 5:37 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1072"><p>#43 &#8211; Background images? No, not in CSS or in table cell backgrounds, yet. We&#8217;ve received this and many other requests and bugs, and plan to roll as many of these into the next version that we can.</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.websiteoptimization.com/' rel='external nofollow' class='url'>Andy King</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1072" title="March 26, 2003 @ 7:44 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1073"><p>Yeesh! Peter Cranstone commenting on mod_gzip! Everyone has ended up here!</p>
<p>Ok, I compress EVERYTHING using mod_gzip: PHP, HTML, plaintext, Word Docs, anything that can be compressed properly. </p>
<p>My caveat is that I serve my pages across a very low speed connection. However, for those of you who have visited my sites over the last few days, my download speed is not greatly affected. I have also focused on text-heavy, graphics light content, all of which is highly compressible.</p>
<p>I do not have a lower-bound on mod_gzip, and I agree that compression on all files is not a bad thing.</p>
<p>Fewer Packets are ALWAYS a good thing.</p>
<p>smp</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.webcompression.org/' rel='external nofollow' class='url'>Stephen Pierzchala</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1073" title="March 26, 2003 @ 11:42 pm"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1074"><p>Gziping an entire page is nice, but when everything on your site is dynamic, it means gziping practically every request.  Is there some way to gzip just sections of a page, like the toolbar, blogrolls, metatags, and inline css?  I can see gzipping these as external files that are included via javascript or css include, but what if you want to keep the page as one file?</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.dylangreene.com/' rel='external nofollow' class='url'>Dylan Greene</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1074" title="March 27, 2003 @ 8:36 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li id="comment-1075"><p>Dylan:</p>
<p>At this point, and somebody correct me if I am wrong, it is an all or nothing proposition for compressed content. The alternative would be to send a transfer-encoding header, which specifies which order the encoding were applied &#8212; especially good for multi-part documents.</p>
<p>However, Transfer-Encoding causes most browsers to explode on contact. So, we are stuck&#8230;for right now.</p>
<p>smp</p>
<p class=sig>&#8212;&#8201;<cite><a href='/web/20100620055016/http://www.webcompression.org/' rel='external nofollow' class='url'>Stephen Pierzchala</a></cite>&#160;<a class=p href="/web/20100620055016/http://diveintomark.org/archives/2003/03/25/web_site_optimization_review#comment-1075" title="March 27, 2003 @ 11:55 am"><img alt="#" src=/web/20100620055016im_/http://wearehugh.com/h.png width=8 height=9></a></li>
<li class=tb id="comment-1078"><cite><a href='/web/20100620055016/http://www.mentalized.net/journal/archives/technology/size_optimizing/index.asp' rel='external nofollow' class='url'>Mentalized</a></cite>&#160;(trackback)</li>
<li class=tb id="comment-1079"><cite><a href='/web/20100620055016/http://www.mentalized.net/journal/archives/technology/size_optimizing/index.asp' rel='external nofollow' class='url'>Mentalized</a></cite>&#160;(trackback)</li>
<li class=tb id="comment-1080"><cite><a href='/web/20100620055016/http://www.mentalized.net/journal/archives/technology/size_optimizing/index.asp' rel='external nofollow' class='url'>Mentalized</a></cite>&#160;(trackback)</li>
</ol>
<h3 id=respond>Respond privately</h3>
<p><i>I am no longer accepting public comments on this post, but you can use this form to contact me privately.  (Your message will not be published.)</i></p>
<form action="/web/20100620055016/http://wearehugh.com/public/contact.cgi" method=POST id=commentform>
<p><label for=author>Name </label><br>
<input type=text name=author id=author>
<p><label for=email>Email</label><br>
<input type=text name=email id=email></p>
<p><label for=comment>Message</label>
<textarea name=comment id=comment rows=10 cols=40></textarea></p>
<p><input type=submit value="Send message">
</p>
</form>
<p class=c>&#167;
<div class=f>
<p>
<a title="my comments here and elsewhere" href=/web/20100620055016/http://firehose.diveintomark.org/>firehose</a> &#x2027;
<a title="my current open source projects" href=/web/20100620055016/http://code.google.com/u/pilgrim/>code</a> &#x2027;
<a title="my personal news aggregator" href=/web/20100620055016/http://feeds.diveintomark.org/>planet</a>
<p>&#169; 2001&#8211;present <a accesskey=9 href=/web/20100620055016/http://diveintomark.org/about>Mark Pilgrim</a>
</div>
</body>
</html>




<!--
     FILE ARCHIVED ON 5:50:16 Jun 20, 2010 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:15:28 Jan 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
